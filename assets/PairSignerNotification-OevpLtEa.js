import{u as b,g,bD as x,r as n,bE as C,bF as S,j as o,bG as h,bH as k,bI as E,bJ as j,c as v,b as _,a_ as B}from"./index-Ikj8v-B_.js";import{u as w}from"./navigate-TSp9IfPa.js";const N=({sdk:e,boc:t,onClose:l,onSubmit:s,wallet:r})=>{const{t:a}=b(),{extension:p}=g();w(e,l);const i=x(null,s),d=n.useMemo(()=>{if(!C(r))throw new Error("Unexpected wallet");return S(r.publicKey,r.version,t)},[r,t]);return o.jsxs(h,{onSubmit:u=>{u.preventDefault(),u.stopPropagation(),i()},children:[o.jsx(k,{title:a("import_signer"),description:a("signer_scan_tx_description")}),o.jsx(E,{extension:p,margin:!0,children:o.jsx(j,{message:d})}),o.jsx(v,{primary:!0,size:"large",fullWidth:!0,type:"submit",children:a("signer_scan_result")})]})},I=()=>{const e=_(),[t,l]=n.useState(void 0),[s,r]=n.useState(void 0),[a,p]=n.useState(void 0),i=n.useCallback(()=>{l(void 0),r(void 0)},[]),d=n.useCallback(c=>{console.log(c),e.uiEvents.emit("response",{method:"response",id:s,params:c}),i()},[e,s,i]),u=n.useCallback(()=>{s&&e.uiEvents.emit("response",{method:"response",id:s,params:new Error("Cancel auth request")}),i()},[s,e,i]);n.useEffect(()=>{const c=m=>{l(m.params.boc),r(m.id),p(m.params.wallet)};return e.uiEvents.on("signer",c),()=>{e.uiEvents.off("signer",c)}},[e]);const f=n.useCallback(()=>{if(!(!t||!s||!a))return o.jsx(N,{sdk:e,boc:t,onClose:u,onSubmit:d,wallet:a})},[e,t,s,u,d,a]);return o.jsx(B,{isOpen:t!=null&&s!=null,handleClose:u,children:f})};export{N as SignerContent,I as default};
