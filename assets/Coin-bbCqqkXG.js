import{ar as P,as as k,at as E,au as H,av as N,ae as M,r as i,j as e,aw as u,S as x,I as f,ax as b,g as B,V as _,W as U,X as S,Z as D,ay as A,a8 as h,az as v,a2 as j,aA as p,u as y,O as w,aq as m,a9 as F,b as C,aB as W,aC as T,a4 as O,a1 as J,a0 as L,y as z,a3 as V,aD as q}from"./index-Ikj8v-B_.js";import{u as K,M as X}from"./MobileActivityList-16WkHC3a.js";import{S as Z,R as G,a as Q,H as I}from"./TonActions-xNSqyWIJ.js";import Y from"./EmptyActivity-TQQQ_sHG.js";import{S as $,R as ee}from"./BuyAction-bFVYXOjF.js";const g=({assetAddress:s,innerRef:t})=>{const{standalone:a}=B(),{refetch:o,isFetched:n,fetchNextPage:r,hasNextPage:d,isFetchingNextPage:l,data:c}=_(s);U(t,5e3,o);const R=l;return K(d,R,r,a,t),!n||!c?e.jsx(S,{}):c.length===0?e.jsx(i.Suspense,{fallback:e.jsx(S,{}),children:e.jsx(Y,{})}):e.jsxs(e.Fragment,{children:[e.jsx(X,{items:c}),R&&e.jsx(D,{size:3})]})},se=({info:s,balance:t})=>{const[a,o]=i.useMemo(()=>[A(t.balance,s.metadata.decimals),N.Address.parse(t.jetton.address).toString()],[s,t]),{data:n}=h(o),r=v(a,s.metadata.decimals),{fiatAmount:d}=j(n,a),{description:l,image:c}=s.metadata;return e.jsx(p,{amount:r,symbol:s.metadata.symbol,price:d,description:l,image:c})},te=({jettonAddress:s})=>{const{data:t}=P(s),{data:a}=k(s),o=E(),{data:n}=H(),r=N.Address.parse(s).toRawString(),d=o||n==null?void 0:n.find(c=>M(c.address)===r),l=i.useRef(null);return!t||!a||!n?e.jsx(u,{}):e.jsxs(e.Fragment,{children:[e.jsx(x,{title:t.metadata.name}),e.jsxs(f,{ref:l,children:[e.jsx(se,{balance:a,info:t}),e.jsxs(b,{children:[!o&&e.jsx(Z,{asset:t.metadata.address}),e.jsx(G,{jetton:t.metadata.address}),d&&e.jsx(Q,{fromAsset:d})]}),e.jsx(g,{assetAddress:a.jetton.address,innerRef:l})]})]})},ae=({info:{balance:s}})=>{const{t}=y(),a=i.useMemo(()=>A(s),[s]),o=v(a),{data:n}=h(F.TON),{fiatAmount:r}=j(n,a);return e.jsx(p,{amount:o,symbol:"TON",price:r,description:t("Ton_page_description"),image:"https://wallet.tonkeeper.com/img/toncoin.svg"})},ne=()=>{const{t:s}=y(),t=i.useRef(null),{data:a}=w();return a?e.jsxs(e.Fragment,{children:[e.jsx(x,{title:s("Toncoin")}),e.jsxs(f,{ref:t,children:[e.jsx(ae,{info:a}),e.jsx(I,{chain:m.TON}),e.jsx(g,{innerRef:t,assetAddress:F.TON})]})]}):e.jsx(u,{activity:4})},oe=()=>{const s=C();return{onOpen:i.useCallback(a=>{s.uiEvents.emit("transfer",{method:"transfer",id:Date.now(),params:{...a,from:"wallet"}})},[s])}},ie=({assetAmount:s})=>{const{data:t}=J(),{fiatAmount:a}=j(t,s.relativeAmount);return e.jsx(p,{amount:s.stringRelativeAmount,symbol:s.asset.symbol,price:a,image:s.asset.image,imageNoCorners:!0})},re=()=>{var n;const s=(n=W().data)==null?void 0:n.usdt,t=i.useRef(null),a=C(),{onOpen:o}=oe();return s===void 0?e.jsx(u,{}):e.jsxs(e.Fragment,{children:[e.jsx(x,{title:s.asset.name}),e.jsxs(f,{ref:t,children:[e.jsx(ie,{assetAmount:s}),e.jsxs(b,{children:[e.jsx(T,{icon:e.jsx($,{}),title:"wallet_send",action:()=>o({chain:m.TRON})}),e.jsx(T,{icon:e.jsx(ee,{}),title:"wallet_receive",action:()=>a.uiEvents.emit("receive",{method:"receive",params:{chain:m.TRON,jetton:s.asset.id}})})]}),e.jsx(g,{assetAddress:O.address,innerRef:t})]})]})},ce=({extra:s})=>{const t=i.useMemo(()=>A(s.amount,s.preview.decimals),[s]),a=v(t),{data:o}=h(s.preview.symbol),{fiatAmount:n}=j(o,t);return e.jsx(p,{amount:a,symbol:s.preview.symbol,price:n,image:s.preview.image})},de=({name:s})=>{var n;y();const t=i.useRef(null),{data:a}=w(),o=(n=a==null?void 0:a.extraBalance)==null?void 0:n.find(r=>r.preview.symbol===s);return o?e.jsxs(e.Fragment,{children:[e.jsx(x,{title:s}),e.jsxs(f,{ref:t,children:[e.jsx(ce,{extra:o}),e.jsx(I,{chain:m.TON}),e.jsx(g,{innerRef:t,assetAddress:o.preview.symbol})]})]}):e.jsx(u,{activity:4})},je=()=>{const s=L(),{name:t}=z();return i.useEffect(()=>{t||s(V.home)},[t]),t?t===O.id?e.jsx(re,{}):t==="ton"?e.jsx(ne,{}):q(decodeURIComponent(t))?e.jsx(te,{jettonAddress:decodeURIComponent(t)}):e.jsx(de,{name:t}):e.jsx(e.Fragment,{})};export{je as default};
