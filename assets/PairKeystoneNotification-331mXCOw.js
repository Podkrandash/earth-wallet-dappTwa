import{bK as Li,bL as cn,bM as _r,bN as Ui,bO as xi,bP as ln,bQ as X,bR as ot,bS as vr,bT as fe,bU as Ue,bV as Ki,bW as ji,bX as Hi,bY as Fi,bZ as ki,b_ as Xi,b$ as $i,c0 as qi,aS as Wi,u as Gi,g as Yi,r as ue,c1 as Vi,c2 as Zi,j as me,bG as Qi,bH as zi,bI as Ji,c3 as eo,c as to,b as ro,a_ as no}from"./index-Ikj8v-B_.js";import{u as io}from"./navigate-TSp9IfPa.js";let Ar,$t,qt=0,Wt=0;function oo(e,t,r){let n=t&&r||0;const i=t||new Array(16);e=e||{};let o=e.node||Ar,a=e.clockseq!==void 0?e.clockseq:$t;if(o==null||a==null){const _=e.random||(e.rng||Li)();o==null&&(o=Ar=[_[0]|1,_[1],_[2],_[3],_[4],_[5]]),a==null&&(a=$t=(_[6]<<8|_[7])&16383)}let c=e.msecs!==void 0?e.msecs:Date.now(),l=e.nsecs!==void 0?e.nsecs:Wt+1;const d=c-qt+(l-Wt)/1e4;if(d<0&&e.clockseq===void 0&&(a=a+1&16383),(d<0||c>qt)&&e.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");qt=c,Wt=l,$t=a,c+=122192928e5;const T=((c&268435455)*1e4+l)%4294967296;i[n++]=T>>>24&255,i[n++]=T>>>16&255,i[n++]=T>>>8&255,i[n++]=T&255;const g=c/4294967296*1e4&268435455;i[n++]=g>>>8&255,i[n++]=g&255,i[n++]=g>>>24&15|16,i[n++]=g>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(let _=0;_<6;++_)i[n+_]=o[_];return t||cn(i)}function dn(e){if(!_r(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function ao(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}const so="6ba7b810-9dad-11d1-80b4-00c04fd430c8",fo="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function hn(e,t,r){function n(i,o,a,c){var l;if(typeof i=="string"&&(i=ao(i)),typeof o=="string"&&(o=dn(o)),((l=o)===null||l===void 0?void 0:l.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let d=new Uint8Array(16+i.length);if(d.set(o),d.set(i,o.length),d=r(d),d[6]=d[6]&15|t,d[8]=d[8]&63|128,a){c=c||0;for(let T=0;T<16;++T)a[c+T]=d[T];return a}return cn(d)}try{n.name=e}catch{}return n.DNS=so,n.URL=fo,n}function uo(e){if(typeof e=="string"){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return co(lo(ho(e),e.length*8))}function co(e){const t=[],r=e.length*32,n="0123456789abcdef";for(let i=0;i<r;i+=8){const o=e[i>>5]>>>i%32&255,a=parseInt(n.charAt(o>>>4&15)+n.charAt(o&15),16);t.push(a)}return t}function pn(e){return(e+64>>>9<<4)+14+1}function lo(e,t){e[t>>5]|=128<<t%32,e[pn(t)-1]=t;let r=1732584193,n=-271733879,i=-1732584194,o=271733878;for(let a=0;a<e.length;a+=16){const c=r,l=n,d=i,T=o;r=G(r,n,i,o,e[a],7,-680876936),o=G(o,r,n,i,e[a+1],12,-389564586),i=G(i,o,r,n,e[a+2],17,606105819),n=G(n,i,o,r,e[a+3],22,-1044525330),r=G(r,n,i,o,e[a+4],7,-176418897),o=G(o,r,n,i,e[a+5],12,1200080426),i=G(i,o,r,n,e[a+6],17,-1473231341),n=G(n,i,o,r,e[a+7],22,-45705983),r=G(r,n,i,o,e[a+8],7,1770035416),o=G(o,r,n,i,e[a+9],12,-1958414417),i=G(i,o,r,n,e[a+10],17,-42063),n=G(n,i,o,r,e[a+11],22,-1990404162),r=G(r,n,i,o,e[a+12],7,1804603682),o=G(o,r,n,i,e[a+13],12,-40341101),i=G(i,o,r,n,e[a+14],17,-1502002290),n=G(n,i,o,r,e[a+15],22,1236535329),r=Y(r,n,i,o,e[a+1],5,-165796510),o=Y(o,r,n,i,e[a+6],9,-1069501632),i=Y(i,o,r,n,e[a+11],14,643717713),n=Y(n,i,o,r,e[a],20,-373897302),r=Y(r,n,i,o,e[a+5],5,-701558691),o=Y(o,r,n,i,e[a+10],9,38016083),i=Y(i,o,r,n,e[a+15],14,-660478335),n=Y(n,i,o,r,e[a+4],20,-405537848),r=Y(r,n,i,o,e[a+9],5,568446438),o=Y(o,r,n,i,e[a+14],9,-1019803690),i=Y(i,o,r,n,e[a+3],14,-187363961),n=Y(n,i,o,r,e[a+8],20,1163531501),r=Y(r,n,i,o,e[a+13],5,-1444681467),o=Y(o,r,n,i,e[a+2],9,-51403784),i=Y(i,o,r,n,e[a+7],14,1735328473),n=Y(n,i,o,r,e[a+12],20,-1926607734),r=V(r,n,i,o,e[a+5],4,-378558),o=V(o,r,n,i,e[a+8],11,-2022574463),i=V(i,o,r,n,e[a+11],16,1839030562),n=V(n,i,o,r,e[a+14],23,-35309556),r=V(r,n,i,o,e[a+1],4,-1530992060),o=V(o,r,n,i,e[a+4],11,1272893353),i=V(i,o,r,n,e[a+7],16,-155497632),n=V(n,i,o,r,e[a+10],23,-1094730640),r=V(r,n,i,o,e[a+13],4,681279174),o=V(o,r,n,i,e[a],11,-358537222),i=V(i,o,r,n,e[a+3],16,-722521979),n=V(n,i,o,r,e[a+6],23,76029189),r=V(r,n,i,o,e[a+9],4,-640364487),o=V(o,r,n,i,e[a+12],11,-421815835),i=V(i,o,r,n,e[a+15],16,530742520),n=V(n,i,o,r,e[a+2],23,-995338651),r=Z(r,n,i,o,e[a],6,-198630844),o=Z(o,r,n,i,e[a+7],10,1126891415),i=Z(i,o,r,n,e[a+14],15,-1416354905),n=Z(n,i,o,r,e[a+5],21,-57434055),r=Z(r,n,i,o,e[a+12],6,1700485571),o=Z(o,r,n,i,e[a+3],10,-1894986606),i=Z(i,o,r,n,e[a+10],15,-1051523),n=Z(n,i,o,r,e[a+1],21,-2054922799),r=Z(r,n,i,o,e[a+8],6,1873313359),o=Z(o,r,n,i,e[a+15],10,-30611744),i=Z(i,o,r,n,e[a+6],15,-1560198380),n=Z(n,i,o,r,e[a+13],21,1309151649),r=Z(r,n,i,o,e[a+4],6,-145523070),o=Z(o,r,n,i,e[a+11],10,-1120210379),i=Z(i,o,r,n,e[a+2],15,718787259),n=Z(n,i,o,r,e[a+9],21,-343485551),r=le(r,c),n=le(n,l),i=le(i,d),o=le(o,T)}return[r,n,i,o]}function ho(e){if(e.length===0)return[];const t=e.length*8,r=new Uint32Array(pn(t));for(let n=0;n<t;n+=8)r[n>>5]|=(e[n/8]&255)<<n%32;return r}function le(e,t){const r=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(r>>16)<<16|r&65535}function po(e,t){return e<<t|e>>>32-t}function St(e,t,r,n,i,o){return le(po(le(le(t,e),le(n,o)),i),r)}function G(e,t,r,n,i,o,a){return St(t&r|~t&n,e,t,i,o,a)}function Y(e,t,r,n,i,o,a){return St(t&n|r&~n,e,t,i,o,a)}function V(e,t,r,n,i,o,a){return St(t^r^n,e,t,i,o,a)}function Z(e,t,r,n,i,o,a){return St(r^(t|~n),e,t,i,o,a)}const yo=hn("v3",48,uo),go=yo;function _o(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function Gt(e,t){return e<<t|e>>>32-t}function vo(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){const a=unescape(encodeURIComponent(e));e=[];for(let c=0;c<a.length;++c)e.push(a.charCodeAt(c))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const n=e.length/4+2,i=Math.ceil(n/16),o=new Array(i);for(let a=0;a<i;++a){const c=new Uint32Array(16);for(let l=0;l<16;++l)c[l]=e[a*64+l*4]<<24|e[a*64+l*4+1]<<16|e[a*64+l*4+2]<<8|e[a*64+l*4+3];o[a]=c}o[i-1][14]=(e.length-1)*8/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=(e.length-1)*8&4294967295;for(let a=0;a<i;++a){const c=new Uint32Array(80);for(let h=0;h<16;++h)c[h]=o[a][h];for(let h=16;h<80;++h)c[h]=Gt(c[h-3]^c[h-8]^c[h-14]^c[h-16],1);let l=r[0],d=r[1],T=r[2],g=r[3],_=r[4];for(let h=0;h<80;++h){const y=Math.floor(h/20),C=Gt(l,5)+_o(y,d,T,g)+_+t[y]+c[h]>>>0;_=g,g=T,T=Gt(d,30)>>>0,d=l,l=C}r[0]=r[0]+l>>>0,r[1]=r[1]+d>>>0,r[2]=r[2]+T>>>0,r[3]=r[3]+g>>>0,r[4]=r[4]+_>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}const mo=hn("v5",80,vo),bo=mo,To="00000000-0000-0000-0000-000000000000";function Co(e){if(!_r(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}const Ro=Object.freeze(Object.defineProperty({__proto__:null,NIL:To,parse:dn,stringify:Ui,v1:oo,v3:go,v4:xi,v5:bo,validate:_r,version:Co},Symbol.toStringTag,{value:"Module"}));var mr={},yn={exports:{}},gn={},Yt={},ur=function(e,t){return ur=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},ur(e,t)};function _n(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ur(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var vt=function(){return vt=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},vt.apply(this,arguments)};function vn(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function mn(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}function bn(e,t){return function(r,n){t(r,n,e)}}function So(e,t,r,n,i,o){function a(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=n.kind,l=c==="getter"?"get":c==="setter"?"set":"value",d=!t&&e?n.static?e:e.prototype:null,T=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),g,_=!1,h=r.length-1;h>=0;h--){var y={};for(var C in n)y[C]=C==="access"?{}:n[C];for(var C in n.access)y.access[C]=n.access[C];y.addInitializer=function(S){if(_)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(S||null))};var R=(0,r[h])(c==="accessor"?{get:T.get,set:T.set}:T[l],y);if(c==="accessor"){if(R===void 0)continue;if(R===null||typeof R!="object")throw new TypeError("Object expected");(g=a(R.get))&&(T.get=g),(g=a(R.set))&&(T.set=g),(g=a(R.init))&&i.unshift(g)}else(g=a(R))&&(c==="field"?i.unshift(g):T[l]=g)}d&&Object.defineProperty(d,n.name,T),_=!0}function Eo(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function wo(e){return typeof e=="symbol"?e:"".concat(e)}function Oo(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function Tn(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Cn(e,t,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function c(T){try{d(n.next(T))}catch(g){a(g)}}function l(T){try{d(n.throw(T))}catch(g){a(g)}}function d(T){T.done?o(T.value):i(T.value).then(c,l)}d((n=n.apply(e,t||[])).next())})}function Rn(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(T){return l([d,T])}}function l(d){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(T){d=[6,T],i=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var Et=Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function Sn(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Et(t,e,r)}function mt(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function br(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o}function En(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(br(arguments[t]));return e}function wn(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],a=0,c=o.length;a<c;a++,i++)n[i]=o[a];return n}function On(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function Ae(e){return this instanceof Ae?(this.v=e,this):new Ae(e)}function In(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(_){n[_]&&(i[_]=function(h){return new Promise(function(y,C){o.push([_,h,y,C])>1||c(_,h)})})}function c(_,h){try{l(n[_](h))}catch(y){g(o[0][3],y)}}function l(_){_.value instanceof Ae?Promise.resolve(_.value.v).then(d,T):g(o[0][2],_)}function d(_){c("next",_)}function T(_){c("throw",_)}function g(_,h){_(h),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Dn(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,o){t[i]=e[i]?function(a){return(r=!r)?{value:Ae(e[i](a)),done:!1}:o?o(a):a}:o}}function An(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof mt=="function"?mt(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=e[o]&&function(a){return new Promise(function(c,l){a=e[o](a),i(c,l,a.done,a.value)})}}function i(o,a,c,l){Promise.resolve(l).then(function(d){o({value:d,done:c})},a)}}function Bn(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var Io=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function Pn(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Et(t,e,r);return Io(t,e),t}function Mn(e){return e&&e.__esModule?e:{default:e}}function Nn(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function Ln(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r}function Un(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function xn(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var Do=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function Kn(e){function t(n){e.error=e.hasError?new Do(n,e.error,"An error was suppressed during disposal."):n,e.hasError=!0}function r(){for(;e.stack.length;){var n=e.stack.pop();try{var i=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(i).then(r,function(o){return t(o),r()})}catch(o){t(o)}}if(e.hasError)throw e.error}return r()}const Ao={__extends:_n,__assign:vt,__rest:vn,__decorate:mn,__param:bn,__metadata:Tn,__awaiter:Cn,__generator:Rn,__createBinding:Et,__exportStar:Sn,__values:mt,__read:br,__spread:En,__spreadArrays:wn,__spreadArray:On,__await:Ae,__asyncGenerator:In,__asyncDelegator:Dn,__asyncValues:An,__makeTemplateObject:Bn,__importStar:Pn,__importDefault:Mn,__classPrivateFieldGet:Nn,__classPrivateFieldSet:Ln,__classPrivateFieldIn:Un,__addDisposableResource:xn,__disposeResources:Kn},Bo=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:xn,get __assign(){return vt},__asyncDelegator:Dn,__asyncGenerator:In,__asyncValues:An,__await:Ae,__awaiter:Cn,__classPrivateFieldGet:Nn,__classPrivateFieldIn:Un,__classPrivateFieldSet:Ln,__createBinding:Et,__decorate:mn,__disposeResources:Kn,__esDecorate:So,__exportStar:Sn,__extends:_n,__generator:Rn,__importDefault:Mn,__importStar:Pn,__makeTemplateObject:Bn,__metadata:Tn,__param:bn,__propKey:wo,__read:br,__rest:vn,__runInitializers:Eo,__setFunctionName:Oo,__spread:En,__spreadArray:On,__spreadArrays:wn,__values:mt,default:Ao},Symbol.toStringTag,{value:"Module"})),Po=ln(Bo);var jn={},Be={},$={},Hn={exports:{}},xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.DataItem=void 0;class Mo{constructor(t,r){this.setTag=n=>{this.tag=n},this.clearTag=()=>{this.tag=void 0},this.getTag=()=>this.tag,this.getData=()=>this.data,this.data=t,this.tag=r}}xe.DataItem=Mo;(function(e){(function(t,r){e.exports?e.exports=r():t.CBOR=r()})(X,function(){const{DataItem:t}=xe;var r=function(){function n(f){this.$hex=f}n.prototype={length:function(){return this.$hex.length/2},toString:function(f){if(!f||f==="hex"||f===16)return this.$hex;if(f==="utf-8"){for(var p="",v=0;v<this.$hex.length;v+=2)p+="%"+this.$hex.substring(v,v+2);return decodeURIComponent(p)}if(f==="latin"){for(var p=[],v=0;v<this.$hex.length;v+=2)p.push(parseInt(this.$hex.substring(v,v+2),16));return String.fromCharCode.apply(String,p)}throw new Error("Unrecognised format: "+f)}},n.fromLatinString=function(f){for(var p="",v=0;v<f.length;v++){var P=f.charCodeAt(v).toString(16);P.length===1&&(P="0"+P),p+=P}return new n(p)},n.fromUtf8String=function(f){for(var p=encodeURIComponent(f),v="",P=0;P<p.length;P++)if(p.charAt(P)==="%")v+=p.substring(P+1,P+3),P+=2;else{var N=p.charCodeAt(P).toString(16);N.length<2&&(N="0"+N),v+=N}return new n(v)};var i=[],o={},a=function(f){return function(){throw new Error(f+" not implemented")}};function c(){}c.prototype={peekByte:a("peekByte"),readByte:a("readByte"),readChunk:a("readChunk"),readFloat16:function(){var f=this.readUint16(),p=(f&32767)>>10,v=f&1023,P=f&32768;if(p===31)return v===0?P?-1/0:1/0:NaN;var N=p?Math.pow(2,p-25)*(1024+v):Math.pow(2,-24)*v;return P?-N:N},readFloat32:function(){var f=this.readUint32(),p=(f&2147483647)>>23,v=f&8388607,P=f&2147483648;if(p===255)return v===0?P?-1/0:1/0:NaN;var N=p?Math.pow(2,p-23-127)*(8388608+v):Math.pow(2,-149)*v;return P?-N:N},readFloat64:function(){var f=this.readUint32(),p=this.readUint32(),v=f>>20&2047,P=(f&1048575)*4294967296+p,N=f&2147483648;if(v===2047)return P===0?N?-1/0:1/0:NaN;var W=v?Math.pow(2,v-52-1023)*(4503599627370496+P):Math.pow(2,-1074)*P;return N?-W:W},readUint16:function(){return this.readByte()*256+this.readByte()},readUint32:function(){return this.readUint16()*65536+this.readUint16()},readUint64:function(){return this.readUint32()*4294967296+this.readUint32()}};function l(){}l.prototype={writeByte:a("writeByte"),result:a("result"),writeFloat16:a("writeFloat16"),writeFloat32:a("writeFloat32"),writeFloat64:a("writeFloat64"),writeUint16:function(f){this.writeByte(f>>8&255),this.writeByte(f&255)},writeUint32:function(f){this.writeUint16(f>>16&65535),this.writeUint16(f&65535)},writeUint64:function(f){if(f>=9007199254740992||f<=-9007199254740992)throw new Error("Cannot encode Uint64 of: "+f+" magnitude to big (floating point errors)");this.writeUint32(Math.floor(f/4294967296)),this.writeUint32(f%4294967296)},writeString:a("writeString"),canWriteBinary:function(f){return!1},writeBinary:a("writeChunk")};function d(f){var p=f.readByte(),v=p>>5,P=p&31;return{type:v,value:P}}function T(f,p){var v=f.value;if(v<24)return v;if(v==24)return p.readByte();if(v==25)return p.readUint16();if(v==26)return p.readUint32();if(v==27)return p.readUint64();if(v==31)return null;a("Additional info: "+v)()}function g(f,p,v){v.writeByte(f<<5|p)}function _(f,p,v){var P=f<<5;p<24?v.writeByte(P|p):p<256?(v.writeByte(P|24),v.writeByte(p)):p<65536?(v.writeByte(P|25),v.writeUint16(p)):p<4294967296?(v.writeByte(P|26),v.writeUint32(p)):(v.writeByte(P|27),v.writeUint64(p))}var h=new Error;function y(f){var p=d(f);switch(p.type){case 0:return T(p,f);case 1:return-1-T(p,f);case 2:return f.readChunk(T(p,f));case 3:var v=f.readChunk(T(p,f));return v.toString("utf-8");case 4:case 5:var P=T(p,f),re=[];if(P!==null){p.type===5&&(P*=2);for(var N=0;N<P;N++)re[N]=y(f)}else for(var W;(W=y(f))!==h;)re.push(W);if(p.type===5){for(var ne={},N=0;N<re.length;N+=2)ne[re[N]]=re[N+1];return ne}else return re;case 6:var Ke=T(p,f),ge=o[Ke],re=y(f);return ge?ge(re):re;case 7:if(p.value===25)return f.readFloat16();if(p.value===26)return f.readFloat32();if(p.value===27)return f.readFloat64();switch(T(p,f)){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case null:return h;default:throw new Error("Unknown fixed value: "+p.value)}default:throw new Error("Unsupported header: "+JSON.stringify(p))}throw new Error("not implemented yet")}function C(f,p){for(var v=0;v<i.length;v++){var P=i[v].fn(f);if(P!==void 0)return _(6,i[v].tag,p),C(P,p)}if(f&&typeof f.toCBOR=="function"&&(f=f.toCBOR()),f===!1)_(7,20,p);else if(f===!0)_(7,21,p);else if(f===null)_(7,22,p);else if(f===void 0)_(7,23,p);else if(typeof f=="number")Math.floor(f)===f&&f<9007199254740992&&f>-9007199254740992?f<0?_(1,-1-f,p):_(0,f,p):(g(7,27,p),p.writeFloat64(f));else if(typeof f=="string")p.writeString(f,function(W){_(3,W,p)});else if(p.canWriteBinary(f))p.writeBinary(f,function(W){_(2,W,p)});else if(typeof f=="object")if(D.config.useToJSON&&typeof f.toJSON=="function"&&(f=f.toJSON()),Array.isArray(f)){_(4,f.length,p);for(var v=0;v<f.length;v++)C(f[v],p)}else{var N=Object.keys(f);_(5,N.length,p);for(var v=0;v<N.length;v++){const ne=parseInt(N[v]);isNaN(ne)?(C(N[v],p),C(f[N[v]],p)):(C(ne,p),C(f[N[v]],p))}}else throw new Error("CBOR encoding not supported: "+f)}var R=[],S=[],D={config:{useToJSON:!0},addWriter:function(f,p){typeof f=="string"?S.push(function(v){if(f===v)return p(v)}):S.push(f)},addReader:function(f,p){typeof f=="string"?R.push(function(v,P){if(f===P)return p(v,P)}):R.push(f)},encode:function(f,p){for(var v=0;v<S.length;v++){var P=S[v],N=P(p);if(N)return C(f,N),N.result()}throw new Error("Unsupported output format: "+p)},encodeDataItem:function(f,p){for(var v=0;v<S.length;v++){var P=S[v],N=P(p);if(N)return f.getTag()!==void 0?(C(f,N),N.result()):(C(f.getData(),N),N.result())}throw new Error("Unsupported output format: "+p)},decode:function(f,p){for(var v=0;v<R.length;v++){var P=R[v],N=P(f,p);if(N)return y(N)}throw new Error("Unsupported input format: "+p)},decodeToDataItem:function(f,p){for(var v=0;v<R.length;v++){var P=R[v],N=P(f,p);if(N){const W=y(N);return W instanceof t?W:new t(W)}}throw new Error("Unsupported input format: "+p)},addSemanticEncode:function(f,p){if(typeof f!="number"||f%1!==0||f<0)throw new Error("Tag must be a positive integer");return i.push({tag:f,fn:p}),this},addSemanticDecode:function(f,p){if(typeof f!="number"||f%1!==0||f<0)throw new Error("Tag must be a positive integer");return o[f]=p,this}};function O(f){this.buffer=f,this.pos=0}O.prototype=Object.create(c.prototype),O.prototype.peekByte=function(){return this.buffer[this.pos]},O.prototype.readByte=function(){return this.buffer[this.pos++]},O.prototype.readUint16=function(){var f=this.buffer.readUInt16BE(this.pos);return this.pos+=2,f},O.prototype.readUint32=function(){var f=this.buffer.readUInt32BE(this.pos);return this.pos+=4,f},O.prototype.readFloat32=function(){var f=this.buffer.readFloatBE(this.pos);return this.pos+=4,f},O.prototype.readFloat64=function(){var f=this.buffer.readDoubleBE(this.pos);return this.pos+=8,f},O.prototype.readChunk=function(f){var p=Buffer.alloc(f);return this.buffer.copy(p,0,this.pos,this.pos+=f),p};function w(f){this.byteLength=0,this.defaultBufferLength=16384,this.latestBuffer=Buffer.alloc(this.defaultBufferLength),this.latestBufferOffset=0,this.completeBuffers=[],this.stringFormat=f}w.prototype=Object.create(l.prototype),w.prototype.writeByte=function(f){this.latestBuffer[this.latestBufferOffset++]=f,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=Buffer.alloc(this.defaultBufferLength),this.latestBufferOffset=0),this.byteLength++},w.prototype.writeFloat32=function(f){var p=Buffer.alloc(4);p.writeFloatBE(f,0),this.writeBuffer(p)},w.prototype.writeFloat64=function(f){var p=Buffer.alloc(8);p.writeDoubleBE(f,0),this.writeBuffer(p)},w.prototype.writeString=function(f,p){var v=Buffer.from(f,"utf-8");p(v.length),this.writeBuffer(v)},w.prototype.canWriteBinary=function(f){return f instanceof Buffer},w.prototype.writeBinary=function(f,p){p(f.length),this.writeBuffer(f)},w.prototype.writeBuffer=function(f){if(!(f instanceof Buffer))throw new TypeError("BufferWriter only accepts Buffers");this.latestBufferOffset?this.latestBuffer.length-this.latestBufferOffset>=f.length?(f.copy(this.latestBuffer,this.latestBufferOffset),this.latestBufferOffset+=f.length,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=Buffer.alloc(this.defaultBufferLength),this.latestBufferOffset=0)):(this.completeBuffers.push(this.latestBuffer.slice(0,this.latestBufferOffset)),this.completeBuffers.push(f),this.latestBuffer=Buffer.alloc(this.defaultBufferLength),this.latestBufferOffset=0):this.completeBuffers.push(f),this.byteLength+=f.length},w.prototype.result=function(){for(var f=Buffer.alloc(this.byteLength),p=0,v=0;v<this.completeBuffers.length;v++){var P=this.completeBuffers[v];P.copy(f,p,0,P.length),p+=P.length}return this.latestBufferOffset&&this.latestBuffer.copy(f,p,0,this.latestBufferOffset),this.stringFormat?f.toString(this.stringFormat):f},typeof Buffer=="function"&&(D.addReader(function(f,p){if(Buffer.isBuffer(f))return new O(f);if(p==="hex"||p==="base64"){var v=Buffer.from(f,p);return new O(v)}}),D.addWriter(function(f){if(!f||f==="buffer")return new w;if(f==="hex"||f==="base64")return new w(f)}));function M(f){this.hex=f,this.pos=0}M.prototype=Object.create(c.prototype),M.prototype.peekByte=function(){var f=this.hex.substring(this.pos,2);return parseInt(f,16)},M.prototype.readByte=function(){var f=this.hex.substring(this.pos,this.pos+2);return this.pos+=2,parseInt(f,16)},M.prototype.readChunk=function(f){var p=this.hex.substring(this.pos,this.pos+f*2);return this.pos+=f*2,typeof Buffer=="function"?Buffer.from(p,"hex"):new n(p)};function B(f){this.$hex="",this.finalFormat=f||"hex"}return B.prototype=Object.create(l.prototype),B.prototype.writeByte=function(f){if(f<0||f>255)throw new Error("Byte value out of range: "+f);var p=f.toString(16);p.length==1&&(p="0"+p),this.$hex+=p},B.prototype.canWriteBinary=function(f){return f instanceof n||typeof Buffer=="function"&&f instanceof Buffer},B.prototype.writeBinary=function(f,p){if(f instanceof n)p(f.length()),this.$hex+=f.$hex;else if(typeof Buffer=="function"&&f instanceof Buffer)p(f.length),this.$hex+=f.toString("hex");else throw new TypeError("HexWriter only accepts BinaryHex or Buffers")},B.prototype.result=function(){return this.finalFormat==="buffer"&&typeof Buffer=="function"?Buffer.from(this.$hex,"hex"):new n(this.$hex).toString(this.finalFormat)},B.prototype.writeString=function(f,p){var v=n.fromUtf8String(f);p(v.length()),this.$hex+=v.$hex},D.addReader(function(f,p){if(f instanceof n||f.$hex)return new M(f.$hex);if(p==="hex")return new M(f)}),D.addWriter(function(f){if(f==="hex")return new B}),D}();return r.addSemanticEncode(0,function(n){if(n instanceof Date)return n.toISOString()}).addSemanticDecode(0,function(n){return new Date(n)}).addSemanticDecode(1,function(n){return new Date(n)}),r})})(Hn);var No=Hn.exports;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DataItem=e.addWriter=e.addReader=e.addSemanticEncode=e.addSemanticDecode=e.decodeToDataItem=e.encodeDataItem=void 0;var t=No;Object.defineProperty(e,"encodeDataItem",{enumerable:!0,get:function(){return t.encodeDataItem}}),Object.defineProperty(e,"decodeToDataItem",{enumerable:!0,get:function(){return t.decodeToDataItem}}),Object.defineProperty(e,"addSemanticDecode",{enumerable:!0,get:function(){return t.addSemanticDecode}}),Object.defineProperty(e,"addSemanticEncode",{enumerable:!0,get:function(){return t.addSemanticEncode}}),Object.defineProperty(e,"addReader",{enumerable:!0,get:function(){return t.addReader}}),Object.defineProperty(e,"addWriter",{enumerable:!0,get:function(){return t.addWriter}});var r=xe;Object.defineProperty(e,"DataItem",{enumerable:!0,get:function(){return r.DataItem}})})($);Object.defineProperty(Be,"__esModule",{value:!0});Be.patchTags=void 0;const pt=$,Br=[],Lo=e=>{e.forEach(t=>{Br.find(r=>r===t)||((0,pt.addSemanticEncode)(t,r=>{if(r instanceof pt.DataItem&&r.getTag()===t)return r.getData()}),(0,pt.addSemanticDecode)(t,r=>new pt.DataItem(r,t)),Br.push(t))})};Be.patchTags=Lo;var k={};Object.defineProperty(k,"__esModule",{value:!0});k.RegistryTypes=k.RegistryType=void 0;class te{constructor(t,r){this.type=t,this.tag=r,this.getTag=()=>this.tag,this.getType=()=>this.type}}k.RegistryType=te;k.RegistryTypes={UUID:new te("uuid",37),BYTES:new te("bytes",void 0),CRYPTO_HDKEY:new te("crypto-hdkey",303),CRYPTO_KEYPATH:new te("crypto-keypath",304),CRYPTO_COIN_INFO:new te("crypto-coin-info",305),CRYPTO_ECKEY:new te("crypto-eckey",306),CRYPTO_OUTPUT:new te("crypto-output",308),CRYPTO_PSBT:new te("crypto-psbt",310),CRYPTO_ACCOUNT:new te("crypto-account",311),CRYPTO_MULTI_ACCOUNTS:new te("crypto-multi-accounts",1103),QR_HARDWARE_CALL:new te("qr-hardware-call",1201),KEY_DERIVATION_CALL:new te("key-derivation-call",1301),KEY_DERIVATION_SCHEMA:new te("key-derivation-schema",1302)};var wt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ScriptExpressions=e.ScriptExpression=void 0;class t{constructor(n,i){this.tag=n,this.expression=i,this.getTag=()=>this.tag,this.getExpression=()=>this.expression}}e.ScriptExpression=t,t.fromTag=r=>Object.values(e.ScriptExpressions).find(i=>i.getTag()===r),e.ScriptExpressions={SCRIPT_HASH:new t(400,"sh"),WITNESS_SCRIPT_HASH:new t(401,"wsh"),PUBLIC_KEY:new t(402,"pk"),PUBLIC_KEY_HASH:new t(403,"pkh"),WITNESS_PUBLIC_KEY_HASH:new t(404,"wpkh"),COMBO:new t(405,"combo"),MULTISIG:new t(406,"multi"),SORTED_MULTISIG:new t(407,"sortedmulti"),ADDRESS:new t(307,"addr"),RAW_SCRIPT:new t(408,"raw")}})(wt);Object.defineProperty(jn,"__esModule",{value:!0});const Uo=Be,xo=k,Ko=wt,jo=Object.values(xo.RegistryTypes).filter(e=>!!e.getTag()).map(e=>e.getTag()),Ho=Object.values(Ko.ScriptExpressions).map(e=>e.getTag());(0,Uo.patchTags)(jo.concat(Ho));var pe={},cr={exports:{}},Tr={exports:{}},De=typeof Reflect=="object"?Reflect:null,Pr=De&&typeof De.apply=="function"?De.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},gt;De&&typeof De.ownKeys=="function"?gt=De.ownKeys:Object.getOwnPropertySymbols?gt=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:gt=function(t){return Object.getOwnPropertyNames(t)};function Fo(e){console&&console.warn&&console.warn(e)}var Fn=Number.isNaN||function(t){return t!==t};function K(){K.init.call(this)}Tr.exports=K;Tr.exports.once=qo;K.EventEmitter=K;K.prototype._events=void 0;K.prototype._eventsCount=0;K.prototype._maxListeners=void 0;var Mr=10;function Ot(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(K,"defaultMaxListeners",{enumerable:!0,get:function(){return Mr},set:function(e){if(typeof e!="number"||e<0||Fn(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Mr=e}});K.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};K.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Fn(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function kn(e){return e._maxListeners===void 0?K.defaultMaxListeners:e._maxListeners}K.prototype.getMaxListeners=function(){return kn(this)};K.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=t==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var a;if(r.length>0&&(a=r[0]),a instanceof Error)throw a;var c=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw c.context=a,c}var l=o[t];if(l===void 0)return!1;if(typeof l=="function")Pr(l,this,r);else for(var d=l.length,T=Gn(l,d),n=0;n<d;++n)Pr(T[n],this,r);return!0};function Xn(e,t,r,n){var i,o,a;if(Ot(r),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]),a===void 0)a=o[t]=r,++e._eventsCount;else if(typeof a=="function"?a=o[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),i=kn(e),i>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,Fo(c)}return e}K.prototype.addListener=function(t,r){return Xn(this,t,r,!1)};K.prototype.on=K.prototype.addListener;K.prototype.prependListener=function(t,r){return Xn(this,t,r,!0)};function ko(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function $n(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=ko.bind(n);return i.listener=r,n.wrapFn=i,i}K.prototype.once=function(t,r){return Ot(r),this.on(t,$n(this,t,r)),this};K.prototype.prependOnceListener=function(t,r){return Ot(r),this.prependListener(t,$n(this,t,r)),this};K.prototype.removeListener=function(t,r){var n,i,o,a,c;if(Ot(r),i=this._events,i===void 0)return this;if(n=i[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===r||n[a].listener===r){c=n[a].listener,o=a;break}if(o<0)return this;o===0?n.shift():Xo(n,o),n.length===1&&(i[t]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",t,c||r)}return this};K.prototype.off=K.prototype.removeListener;K.prototype.removeAllListeners=function(t){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var o=Object.keys(n),a;for(i=0;i<o.length;++i)a=o[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(t,r[i]);return this};function qn(e,t,r){var n=e._events;if(n===void 0)return[];var i=n[t];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?$o(i):Gn(i,i.length)}K.prototype.listeners=function(t){return qn(this,t,!0)};K.prototype.rawListeners=function(t){return qn(this,t,!1)};K.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Wn.call(e,t)};K.prototype.listenerCount=Wn;function Wn(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}K.prototype.eventNames=function(){return this._eventsCount>0?gt(this._events):[]};function Gn(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function Xo(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function $o(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function qo(e,t){return new Promise(function(r,n){function i(a){e.removeListener(t,o),n(a)}function o(){typeof e.removeListener=="function"&&e.removeListener("error",i),r([].slice.call(arguments))}Yn(e,t,o,{once:!0}),t!=="error"&&Wo(e,i,{once:!0})})}function Wo(e,t,r){typeof e.on=="function"&&Yn(e,"error",t,r)}function Yn(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(o){n.once&&e.removeEventListener(t,i),r(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Vn=Tr.exports,Zn=Vn.EventEmitter,Vt,Nr;function Go(){if(Nr)return Vt;Nr=1;function e(y,C){var R=Object.keys(y);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(y);C&&(S=S.filter(function(D){return Object.getOwnPropertyDescriptor(y,D).enumerable})),R.push.apply(R,S)}return R}function t(y){for(var C=1;C<arguments.length;C++){var R=arguments[C]!=null?arguments[C]:{};C%2?e(Object(R),!0).forEach(function(S){r(y,S,R[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(R)):e(Object(R)).forEach(function(S){Object.defineProperty(y,S,Object.getOwnPropertyDescriptor(R,S))})}return y}function r(y,C,R){return C=a(C),C in y?Object.defineProperty(y,C,{value:R,enumerable:!0,configurable:!0,writable:!0}):y[C]=R,y}function n(y,C){if(!(y instanceof C))throw new TypeError("Cannot call a class as a function")}function i(y,C){for(var R=0;R<C.length;R++){var S=C[R];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,a(S.key),S)}}function o(y,C,R){return C&&i(y.prototype,C),R&&i(y,R),Object.defineProperty(y,"prototype",{writable:!1}),y}function a(y){var C=c(y,"string");return typeof C=="symbol"?C:String(C)}function c(y,C){if(typeof y!="object"||y===null)return y;var R=y[Symbol.toPrimitive];if(R!==void 0){var S=R.call(y,C||"default");if(typeof S!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(y)}var l=ot,d=l.Buffer,T=vr,g=T.inspect,_=g&&g.custom||"inspect";function h(y,C,R){d.prototype.copy.call(y,C,R)}return Vt=function(){function y(){n(this,y),this.head=null,this.tail=null,this.length=0}return o(y,[{key:"push",value:function(R){var S={data:R,next:null};this.length>0?this.tail.next=S:this.head=S,this.tail=S,++this.length}},{key:"unshift",value:function(R){var S={data:R,next:this.head};this.length===0&&(this.tail=S),this.head=S,++this.length}},{key:"shift",value:function(){if(this.length!==0){var R=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,R}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(R){if(this.length===0)return"";for(var S=this.head,D=""+S.data;S=S.next;)D+=R+S.data;return D}},{key:"concat",value:function(R){if(this.length===0)return d.alloc(0);for(var S=d.allocUnsafe(R>>>0),D=this.head,O=0;D;)h(D.data,S,O),O+=D.data.length,D=D.next;return S}},{key:"consume",value:function(R,S){var D;return R<this.head.data.length?(D=this.head.data.slice(0,R),this.head.data=this.head.data.slice(R)):R===this.head.data.length?D=this.shift():D=S?this._getString(R):this._getBuffer(R),D}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(R){var S=this.head,D=1,O=S.data;for(R-=O.length;S=S.next;){var w=S.data,M=R>w.length?w.length:R;if(M===w.length?O+=w:O+=w.slice(0,R),R-=M,R===0){M===w.length?(++D,S.next?this.head=S.next:this.head=this.tail=null):(this.head=S,S.data=w.slice(M));break}++D}return this.length-=D,O}},{key:"_getBuffer",value:function(R){var S=d.allocUnsafe(R),D=this.head,O=1;for(D.data.copy(S),R-=D.data.length;D=D.next;){var w=D.data,M=R>w.length?w.length:R;if(w.copy(S,S.length-R,0,M),R-=M,R===0){M===w.length?(++O,D.next?this.head=D.next:this.head=this.tail=null):(this.head=D,D.data=w.slice(M));break}++O}return this.length-=O,S}},{key:_,value:function(R,S){return g(this,t(t({},S),{},{depth:0,customInspect:!1}))}}]),y}(),Vt}function Yo(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(lr,this,e)):process.nextTick(lr,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(o){!t&&o?r._writableState?r._writableState.errorEmitted?process.nextTick(_t,r):(r._writableState.errorEmitted=!0,process.nextTick(Lr,r,o)):process.nextTick(Lr,r,o):t?(process.nextTick(_t,r),t(o)):process.nextTick(_t,r)}),this)}function Lr(e,t){lr(e,t),_t(e)}function _t(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function Vo(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function lr(e,t){e.emit("error",t)}function Zo(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}var Qn={destroy:Yo,undestroy:Vo,errorOrDestroy:Zo},Se={};function Qo(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var zn={};function oe(e,t,r){r||(r=Error);function n(o,a,c){return typeof t=="string"?t:t(o,a,c)}var i=function(o){Qo(a,o);function a(c,l,d){return o.call(this,n(c,l,d))||this}return a}(r);i.prototype.name=r.name,i.prototype.code=e,zn[e]=i}function Ur(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(n){return String(n)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function zo(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function Jo(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function ea(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}oe("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);oe("ERR_INVALID_ARG_TYPE",function(e,t,r){var n;typeof t=="string"&&zo(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";var i;if(Jo(e," argument"))i="The ".concat(e," ").concat(n," ").concat(Ur(t,"type"));else{var o=ea(e,".")?"property":"argument";i='The "'.concat(e,'" ').concat(o," ").concat(n," ").concat(Ur(t,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);oe("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");oe("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});oe("ERR_STREAM_PREMATURE_CLOSE","Premature close");oe("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});oe("ERR_MULTIPLE_CALLBACK","Callback called multiple times");oe("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");oe("ERR_STREAM_WRITE_AFTER_END","write after end");oe("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);oe("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);oe("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Se.codes=zn;var ta=Se.codes.ERR_INVALID_OPT_VALUE;function ra(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function na(e,t,r,n){var i=ra(t,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=n?r:"highWaterMark";throw new ta(o,i)}return Math.floor(i)}return e.objectMode?16:16*1024}var Jn={getHighWaterMark:na},ia=oa;function oa(e,t){if(Zt("noDeprecation"))return e;var r=!1;function n(){if(!r){if(Zt("throwDeprecation"))throw new Error(t);Zt("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}return n}function Zt(e){try{if(!X.localStorage)return!1}catch{return!1}var t=X.localStorage[e];return t==null?!1:String(t).toLowerCase()==="true"}var Qt,xr;function ei(){if(xr)return Qt;xr=1,Qt=p;function e(b){var m=this;this.next=null,this.entry=null,this.finish=function(){Ht(m,b)}}var t;p.WritableState=B;var r={deprecate:ia},n=Zn,i=ot.Buffer,o=(typeof X<"u"?X:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function a(b){return i.from(b)}function c(b){return i.isBuffer(b)||b instanceof o}var l=Qn,d=Jn,T=d.getHighWaterMark,g=Se.codes,_=g.ERR_INVALID_ARG_TYPE,h=g.ERR_METHOD_NOT_IMPLEMENTED,y=g.ERR_MULTIPLE_CALLBACK,C=g.ERR_STREAM_CANNOT_PIPE,R=g.ERR_STREAM_DESTROYED,S=g.ERR_STREAM_NULL_VALUES,D=g.ERR_STREAM_WRITE_AFTER_END,O=g.ERR_UNKNOWN_ENCODING,w=l.errorOrDestroy;fe(p,n);function M(){}function B(b,m,I){t=t||Pe(),b=b||{},typeof I!="boolean"&&(I=m instanceof t),this.objectMode=!!b.objectMode,I&&(this.objectMode=this.objectMode||!!b.writableObjectMode),this.highWaterMark=T(this,b,"writableHighWaterMark",I),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var L=b.decodeStrings===!1;this.decodeStrings=!L,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(x){re(m,x)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=b.emitClose!==!1,this.autoDestroy=!!b.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}B.prototype.getBuffer=function(){for(var m=this.bufferedRequest,I=[];m;)I.push(m),m=m.next;return I},function(){try{Object.defineProperty(B.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var f;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(p,Symbol.hasInstance,{value:function(m){return f.call(this,m)?!0:this!==p?!1:m&&m._writableState instanceof B}})):f=function(m){return m instanceof this};function p(b){t=t||Pe();var m=this instanceof t;if(!m&&!f.call(p,this))return new p(b);this._writableState=new B(b,this,m),this.writable=!0,b&&(typeof b.write=="function"&&(this._write=b.write),typeof b.writev=="function"&&(this._writev=b.writev),typeof b.destroy=="function"&&(this._destroy=b.destroy),typeof b.final=="function"&&(this._final=b.final)),n.call(this)}p.prototype.pipe=function(){w(this,new C)};function v(b,m){var I=new D;w(b,I),process.nextTick(m,I)}function P(b,m,I,L){var x;return I===null?x=new S:typeof I!="string"&&!m.objectMode&&(x=new _("chunk",["string","Buffer"],I)),x?(w(b,x),process.nextTick(L,x),!1):!0}p.prototype.write=function(b,m,I){var L=this._writableState,x=!1,s=!L.objectMode&&c(b);return s&&!i.isBuffer(b)&&(b=a(b)),typeof m=="function"&&(I=m,m=null),s?m="buffer":m||(m=L.defaultEncoding),typeof I!="function"&&(I=M),L.ending?v(this,I):(s||P(this,L,b,I))&&(L.pendingcb++,x=W(this,L,s,b,m,I)),x},p.prototype.cork=function(){this._writableState.corked++},p.prototype.uncork=function(){var b=this._writableState;b.corked&&(b.corked--,!b.writing&&!b.corked&&!b.bufferProcessing&&b.bufferedRequest&&Ee(this,b))},p.prototype.setDefaultEncoding=function(m){if(typeof m=="string"&&(m=m.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((m+"").toLowerCase())>-1))throw new O(m);return this._writableState.defaultEncoding=m,this},Object.defineProperty(p.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function N(b,m,I){return!b.objectMode&&b.decodeStrings!==!1&&typeof m=="string"&&(m=i.from(m,I)),m}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function W(b,m,I,L,x,s){if(!I){var u=N(m,L,x);L!==u&&(I=!0,x="buffer",L=u)}var E=m.objectMode?1:L.length;m.length+=E;var A=m.length<m.highWaterMark;if(A||(m.needDrain=!0),m.writing||m.corked){var F=m.lastBufferedRequest;m.lastBufferedRequest={chunk:L,encoding:x,isBuf:I,callback:s,next:null},F?F.next=m.lastBufferedRequest:m.bufferedRequest=m.lastBufferedRequest,m.bufferedRequestCount+=1}else ne(b,m,!1,E,L,x,s);return A}function ne(b,m,I,L,x,s,u){m.writelen=L,m.writecb=u,m.writing=!0,m.sync=!0,m.destroyed?m.onwrite(new R("write")):I?b._writev(x,m.onwrite):b._write(x,s,m.onwrite),m.sync=!1}function Ke(b,m,I,L,x){--m.pendingcb,I?(process.nextTick(x,L),process.nextTick(ve,b,m),b._writableState.errorEmitted=!0,w(b,L)):(x(L),b._writableState.errorEmitted=!0,w(b,L),ve(b,m))}function ge(b){b.writing=!1,b.writecb=null,b.length-=b.writelen,b.writelen=0}function re(b,m){var I=b._writableState,L=I.sync,x=I.writecb;if(typeof x!="function")throw new y;if(ge(I),m)Ke(b,I,L,m,x);else{var s=lt(I)||b.destroyed;!s&&!I.corked&&!I.bufferProcessing&&I.bufferedRequest&&Ee(b,I),L?process.nextTick(_e,b,I,s,x):_e(b,I,s,x)}}function _e(b,m,I,L){I||ct(b,m),m.pendingcb--,L(),ve(b,m)}function ct(b,m){m.length===0&&m.needDrain&&(m.needDrain=!1,b.emit("drain"))}function Ee(b,m){m.bufferProcessing=!0;var I=m.bufferedRequest;if(b._writev&&I&&I.next){var L=m.bufferedRequestCount,x=new Array(L),s=m.corkedRequestsFree;s.entry=I;for(var u=0,E=!0;I;)x[u]=I,I.isBuf||(E=!1),I=I.next,u+=1;x.allBuffers=E,ne(b,m,!0,m.length,x,"",s.finish),m.pendingcb++,m.lastBufferedRequest=null,s.next?(m.corkedRequestsFree=s.next,s.next=null):m.corkedRequestsFree=new e(m),m.bufferedRequestCount=0}else{for(;I;){var A=I.chunk,F=I.encoding,U=I.callback,H=m.objectMode?1:A.length;if(ne(b,m,!1,H,A,F,U),I=I.next,m.bufferedRequestCount--,m.writing)break}I===null&&(m.lastBufferedRequest=null)}m.bufferedRequest=I,m.bufferProcessing=!1}p.prototype._write=function(b,m,I){I(new h("_write()"))},p.prototype._writev=null,p.prototype.end=function(b,m,I){var L=this._writableState;return typeof b=="function"?(I=b,b=null,m=null):typeof m=="function"&&(I=m,m=null),b!=null&&this.write(b,m),L.corked&&(L.corked=1,this.uncork()),L.ending||jt(this,L,I),this},Object.defineProperty(p.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function lt(b){return b.ending&&b.length===0&&b.bufferedRequest===null&&!b.finished&&!b.writing}function Kt(b,m){b._final(function(I){m.pendingcb--,I&&w(b,I),m.prefinished=!0,b.emit("prefinish"),ve(b,m)})}function dt(b,m){!m.prefinished&&!m.finalCalled&&(typeof b._final=="function"&&!m.destroyed?(m.pendingcb++,m.finalCalled=!0,process.nextTick(Kt,b,m)):(m.prefinished=!0,b.emit("prefinish")))}function ve(b,m){var I=lt(m);if(I&&(dt(b,m),m.pendingcb===0&&(m.finished=!0,b.emit("finish"),m.autoDestroy))){var L=b._readableState;(!L||L.autoDestroy&&L.endEmitted)&&b.destroy()}return I}function jt(b,m,I){m.ending=!0,ve(b,m),I&&(m.finished?process.nextTick(I):b.once("finish",I)),m.ended=!0,b.writable=!1}function Ht(b,m,I){var L=b.entry;for(b.entry=null;L;){var x=L.callback;m.pendingcb--,x(I),L=L.next}m.corkedRequestsFree.next=b}return Object.defineProperty(p.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(m){this._writableState&&(this._writableState.destroyed=m)}}),p.prototype.destroy=l.destroy,p.prototype._undestroy=l.undestroy,p.prototype._destroy=function(b,m){m(b)},Qt}var zt,Kr;function Pe(){if(Kr)return zt;Kr=1;var e=Object.keys||function(d){var T=[];for(var g in d)T.push(g);return T};zt=a;var t=ri(),r=ei();fe(a,t);for(var n=e(r.prototype),i=0;i<n.length;i++){var o=n[i];a.prototype[o]||(a.prototype[o]=r.prototype[o])}function a(d){if(!(this instanceof a))return new a(d);t.call(this,d),r.call(this,d),this.allowHalfOpen=!0,d&&(d.readable===!1&&(this.readable=!1),d.writable===!1&&(this.writable=!1),d.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",c)))}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function c(){this._writableState.ended||process.nextTick(l,this)}function l(d){d.end()}return Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(T){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=T,this._writableState.destroyed=T)}}),zt}var bt={},Cr=Ue.Buffer,jr=Cr.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function aa(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function sa(e){var t=aa(e);if(typeof t!="string"&&(Cr.isEncoding===jr||!jr(e)))throw new Error("Unknown encoding: "+e);return t||e}bt.StringDecoder=at;function at(e){this.encoding=sa(e);var t;switch(this.encoding){case"utf16le":this.text=ha,this.end=pa,t=4;break;case"utf8":this.fillLast=ca,t=4;break;case"base64":this.text=ya,this.end=ga,t=3;break;default:this.write=_a,this.end=va;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Cr.allocUnsafe(t)}at.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};at.prototype.end=da;at.prototype.text=la;at.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function Jt(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function fa(e,t,r){var n=t.length-1;if(n<r)return 0;var i=Jt(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||i===-2?0:(i=Jt(t[n]),i>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||i===-2?0:(i=Jt(t[n]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function ua(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"�"}}function ca(e){var t=this.lastTotal-this.lastNeed,r=ua(this,e);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function la(e,t){var r=fa(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function da(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t}function ha(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function pa(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function ya(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function ga(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function _a(e){return e.toString(this.encoding)}function va(e){return e&&e.length?this.write(e):""}var Hr=Se.codes.ERR_STREAM_PREMATURE_CLOSE;function ma(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}function ba(){}function Ta(e){return e.setHeader&&typeof e.abort=="function"}function ti(e,t,r){if(typeof t=="function")return ti(e,null,t);t||(t={}),r=ma(r||ba);var n=t.readable||t.readable!==!1&&e.readable,i=t.writable||t.writable!==!1&&e.writable,o=function(){e.writable||c()},a=e._writableState&&e._writableState.finished,c=function(){i=!1,a=!0,n||r.call(e)},l=e._readableState&&e._readableState.endEmitted,d=function(){n=!1,l=!0,i||r.call(e)},T=function(y){r.call(e,y)},g=function(){var y;if(n&&!l)return(!e._readableState||!e._readableState.ended)&&(y=new Hr),r.call(e,y);if(i&&!a)return(!e._writableState||!e._writableState.ended)&&(y=new Hr),r.call(e,y)},_=function(){e.req.on("finish",c)};return Ta(e)?(e.on("complete",c),e.on("abort",g),e.req?_():e.on("request",_)):i&&!e._writableState&&(e.on("end",o),e.on("close",o)),e.on("end",d),e.on("finish",c),t.error!==!1&&e.on("error",T),e.on("close",g),function(){e.removeListener("complete",c),e.removeListener("abort",g),e.removeListener("request",_),e.req&&e.req.removeListener("finish",c),e.removeListener("end",o),e.removeListener("close",o),e.removeListener("finish",c),e.removeListener("end",d),e.removeListener("error",T),e.removeListener("close",g)}}var Rr=ti,er,Fr;function Ca(){if(Fr)return er;Fr=1;var e;function t(O,w,M){return w=r(w),w in O?Object.defineProperty(O,w,{value:M,enumerable:!0,configurable:!0,writable:!0}):O[w]=M,O}function r(O){var w=n(O,"string");return typeof w=="symbol"?w:String(w)}function n(O,w){if(typeof O!="object"||O===null)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var B=M.call(O,w||"default");if(typeof B!="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(O)}var i=Rr,o=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),d=Symbol("lastPromise"),T=Symbol("handlePromise"),g=Symbol("stream");function _(O,w){return{value:O,done:w}}function h(O){var w=O[o];if(w!==null){var M=O[g].read();M!==null&&(O[d]=null,O[o]=null,O[a]=null,w(_(M,!1)))}}function y(O){process.nextTick(h,O)}function C(O,w){return function(M,B){O.then(function(){if(w[l]){M(_(void 0,!0));return}w[T](M,B)},B)}}var R=Object.getPrototypeOf(function(){}),S=Object.setPrototypeOf((e={get stream(){return this[g]},next:function(){var w=this,M=this[c];if(M!==null)return Promise.reject(M);if(this[l])return Promise.resolve(_(void 0,!0));if(this[g].destroyed)return new Promise(function(v,P){process.nextTick(function(){w[c]?P(w[c]):v(_(void 0,!0))})});var B=this[d],f;if(B)f=new Promise(C(B,this));else{var p=this[g].read();if(p!==null)return Promise.resolve(_(p,!1));f=new Promise(this[T])}return this[d]=f,f}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var w=this;return new Promise(function(M,B){w[g].destroy(null,function(f){if(f){B(f);return}M(_(void 0,!0))})})}),e),R),D=function(w){var M,B=Object.create(S,(M={},t(M,g,{value:w,writable:!0}),t(M,o,{value:null,writable:!0}),t(M,a,{value:null,writable:!0}),t(M,c,{value:null,writable:!0}),t(M,l,{value:w._readableState.endEmitted,writable:!0}),t(M,T,{value:function(p,v){var P=B[g].read();P?(B[d]=null,B[o]=null,B[a]=null,p(_(P,!1))):(B[o]=p,B[a]=v)},writable:!0}),M));return B[d]=null,i(w,function(f){if(f&&f.code!=="ERR_STREAM_PREMATURE_CLOSE"){var p=B[a];p!==null&&(B[d]=null,B[o]=null,B[a]=null,p(f)),B[c]=f;return}var v=B[o];v!==null&&(B[d]=null,B[o]=null,B[a]=null,v(_(void 0,!0))),B[l]=!0}),w.on("readable",y.bind(null,B)),B};return er=D,er}var tr,kr;function Ra(){return kr||(kr=1,tr=function(){throw new Error("Readable.from is not available in the browser")}),tr}var rr,Xr;function ri(){if(Xr)return rr;Xr=1,rr=v;var e;v.ReadableState=p,Vn.EventEmitter;var t=function(u,E){return u.listeners(E).length},r=Zn,n=ot.Buffer,i=(typeof X<"u"?X:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(s){return n.from(s)}function a(s){return n.isBuffer(s)||s instanceof i}var c=vr,l;c&&c.debuglog?l=c.debuglog("stream"):l=function(){};var d=Go(),T=Qn,g=Jn,_=g.getHighWaterMark,h=Se.codes,y=h.ERR_INVALID_ARG_TYPE,C=h.ERR_STREAM_PUSH_AFTER_EOF,R=h.ERR_METHOD_NOT_IMPLEMENTED,S=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,D,O,w;fe(v,r);var M=T.errorOrDestroy,B=["error","close","destroy","pause","resume"];function f(s,u,E){if(typeof s.prependListener=="function")return s.prependListener(u,E);!s._events||!s._events[u]?s.on(u,E):Array.isArray(s._events[u])?s._events[u].unshift(E):s._events[u]=[E,s._events[u]]}function p(s,u,E){e=e||Pe(),s=s||{},typeof E!="boolean"&&(E=u instanceof e),this.objectMode=!!s.objectMode,E&&(this.objectMode=this.objectMode||!!s.readableObjectMode),this.highWaterMark=_(this,s,"readableHighWaterMark",E),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=s.emitClose!==!1,this.autoDestroy=!!s.autoDestroy,this.destroyed=!1,this.defaultEncoding=s.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,s.encoding&&(D||(D=bt.StringDecoder),this.decoder=new D(s.encoding),this.encoding=s.encoding)}function v(s){if(e=e||Pe(),!(this instanceof v))return new v(s);var u=this instanceof e;this._readableState=new p(s,this,u),this.readable=!0,s&&(typeof s.read=="function"&&(this._read=s.read),typeof s.destroy=="function"&&(this._destroy=s.destroy)),r.call(this)}Object.defineProperty(v.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(u){this._readableState&&(this._readableState.destroyed=u)}}),v.prototype.destroy=T.destroy,v.prototype._undestroy=T.undestroy,v.prototype._destroy=function(s,u){u(s)},v.prototype.push=function(s,u){var E=this._readableState,A;return E.objectMode?A=!0:typeof s=="string"&&(u=u||E.defaultEncoding,u!==E.encoding&&(s=n.from(s,u),u=""),A=!0),P(this,s,u,!1,A)},v.prototype.unshift=function(s){return P(this,s,null,!0,!1)};function P(s,u,E,A,F){l("readableAddChunk",u);var U=s._readableState;if(u===null)U.reading=!1,re(s,U);else{var H;if(F||(H=W(U,u)),H)M(s,H);else if(U.objectMode||u&&u.length>0)if(typeof u!="string"&&!U.objectMode&&Object.getPrototypeOf(u)!==n.prototype&&(u=o(u)),A)U.endEmitted?M(s,new S):N(s,U,u,!0);else if(U.ended)M(s,new C);else{if(U.destroyed)return!1;U.reading=!1,U.decoder&&!E?(u=U.decoder.write(u),U.objectMode||u.length!==0?N(s,U,u,!1):Ee(s,U)):N(s,U,u,!1)}else A||(U.reading=!1,Ee(s,U))}return!U.ended&&(U.length<U.highWaterMark||U.length===0)}function N(s,u,E,A){u.flowing&&u.length===0&&!u.sync?(u.awaitDrain=0,s.emit("data",E)):(u.length+=u.objectMode?1:E.length,A?u.buffer.unshift(E):u.buffer.push(E),u.needReadable&&_e(s)),Ee(s,u)}function W(s,u){var E;return!a(u)&&typeof u!="string"&&u!==void 0&&!s.objectMode&&(E=new y("chunk",["string","Buffer","Uint8Array"],u)),E}v.prototype.isPaused=function(){return this._readableState.flowing===!1},v.prototype.setEncoding=function(s){D||(D=bt.StringDecoder);var u=new D(s);this._readableState.decoder=u,this._readableState.encoding=this._readableState.decoder.encoding;for(var E=this._readableState.buffer.head,A="";E!==null;)A+=u.write(E.data),E=E.next;return this._readableState.buffer.clear(),A!==""&&this._readableState.buffer.push(A),this._readableState.length=A.length,this};var ne=1073741824;function Ke(s){return s>=ne?s=ne:(s--,s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s++),s}function ge(s,u){return s<=0||u.length===0&&u.ended?0:u.objectMode?1:s!==s?u.flowing&&u.length?u.buffer.head.data.length:u.length:(s>u.highWaterMark&&(u.highWaterMark=Ke(s)),s<=u.length?s:u.ended?u.length:(u.needReadable=!0,0))}v.prototype.read=function(s){l("read",s),s=parseInt(s,10);var u=this._readableState,E=s;if(s!==0&&(u.emittedReadable=!1),s===0&&u.needReadable&&((u.highWaterMark!==0?u.length>=u.highWaterMark:u.length>0)||u.ended))return l("read: emitReadable",u.length,u.ended),u.length===0&&u.ended?I(this):_e(this),null;if(s=ge(s,u),s===0&&u.ended)return u.length===0&&I(this),null;var A=u.needReadable;l("need readable",A),(u.length===0||u.length-s<u.highWaterMark)&&(A=!0,l("length less than watermark",A)),u.ended||u.reading?(A=!1,l("reading or ended",A)):A&&(l("do read"),u.reading=!0,u.sync=!0,u.length===0&&(u.needReadable=!0),this._read(u.highWaterMark),u.sync=!1,u.reading||(s=ge(E,u)));var F;return s>0?F=m(s,u):F=null,F===null?(u.needReadable=u.length<=u.highWaterMark,s=0):(u.length-=s,u.awaitDrain=0),u.length===0&&(u.ended||(u.needReadable=!0),E!==s&&u.ended&&I(this)),F!==null&&this.emit("data",F),F};function re(s,u){if(l("onEofChunk"),!u.ended){if(u.decoder){var E=u.decoder.end();E&&E.length&&(u.buffer.push(E),u.length+=u.objectMode?1:E.length)}u.ended=!0,u.sync?_e(s):(u.needReadable=!1,u.emittedReadable||(u.emittedReadable=!0,ct(s)))}}function _e(s){var u=s._readableState;l("emitReadable",u.needReadable,u.emittedReadable),u.needReadable=!1,u.emittedReadable||(l("emitReadable",u.flowing),u.emittedReadable=!0,process.nextTick(ct,s))}function ct(s){var u=s._readableState;l("emitReadable_",u.destroyed,u.length,u.ended),!u.destroyed&&(u.length||u.ended)&&(s.emit("readable"),u.emittedReadable=!1),u.needReadable=!u.flowing&&!u.ended&&u.length<=u.highWaterMark,b(s)}function Ee(s,u){u.readingMore||(u.readingMore=!0,process.nextTick(lt,s,u))}function lt(s,u){for(;!u.reading&&!u.ended&&(u.length<u.highWaterMark||u.flowing&&u.length===0);){var E=u.length;if(l("maybeReadMore read 0"),s.read(0),E===u.length)break}u.readingMore=!1}v.prototype._read=function(s){M(this,new R("_read()"))},v.prototype.pipe=function(s,u){var E=this,A=this._readableState;switch(A.pipesCount){case 0:A.pipes=s;break;case 1:A.pipes=[A.pipes,s];break;default:A.pipes.push(s);break}A.pipesCount+=1,l("pipe count=%d opts=%j",A.pipesCount,u);var F=(!u||u.end!==!1)&&s!==process.stdout&&s!==process.stderr,U=F?we:je;A.endEmitted?process.nextTick(U):E.once("end",U),s.on("unpipe",H);function H(Oe,Ie){l("onunpipe"),Oe===E&&Ie&&Ie.hasUnpiped===!1&&(Ie.hasUnpiped=!0,Ni())}function we(){l("onend"),s.end()}var ht=Kt(E);s.on("drain",ht);var Ir=!1;function Ni(){l("cleanup"),s.removeListener("close",kt),s.removeListener("finish",Xt),s.removeListener("drain",ht),s.removeListener("error",Ft),s.removeListener("unpipe",H),E.removeListener("end",we),E.removeListener("end",je),E.removeListener("data",Dr),Ir=!0,A.awaitDrain&&(!s._writableState||s._writableState.needDrain)&&ht()}E.on("data",Dr);function Dr(Oe){l("ondata");var Ie=s.write(Oe);l("dest.write",Ie),Ie===!1&&((A.pipesCount===1&&A.pipes===s||A.pipesCount>1&&x(A.pipes,s)!==-1)&&!Ir&&(l("false write response, pause",A.awaitDrain),A.awaitDrain++),E.pause())}function Ft(Oe){l("onerror",Oe),je(),s.removeListener("error",Ft),t(s,"error")===0&&M(s,Oe)}f(s,"error",Ft);function kt(){s.removeListener("finish",Xt),je()}s.once("close",kt);function Xt(){l("onfinish"),s.removeListener("close",kt),je()}s.once("finish",Xt);function je(){l("unpipe"),E.unpipe(s)}return s.emit("pipe",E),A.flowing||(l("pipe resume"),E.resume()),s};function Kt(s){return function(){var E=s._readableState;l("pipeOnDrain",E.awaitDrain),E.awaitDrain&&E.awaitDrain--,E.awaitDrain===0&&t(s,"data")&&(E.flowing=!0,b(s))}}v.prototype.unpipe=function(s){var u=this._readableState,E={hasUnpiped:!1};if(u.pipesCount===0)return this;if(u.pipesCount===1)return s&&s!==u.pipes?this:(s||(s=u.pipes),u.pipes=null,u.pipesCount=0,u.flowing=!1,s&&s.emit("unpipe",this,E),this);if(!s){var A=u.pipes,F=u.pipesCount;u.pipes=null,u.pipesCount=0,u.flowing=!1;for(var U=0;U<F;U++)A[U].emit("unpipe",this,{hasUnpiped:!1});return this}var H=x(u.pipes,s);return H===-1?this:(u.pipes.splice(H,1),u.pipesCount-=1,u.pipesCount===1&&(u.pipes=u.pipes[0]),s.emit("unpipe",this,E),this)},v.prototype.on=function(s,u){var E=r.prototype.on.call(this,s,u),A=this._readableState;return s==="data"?(A.readableListening=this.listenerCount("readable")>0,A.flowing!==!1&&this.resume()):s==="readable"&&!A.endEmitted&&!A.readableListening&&(A.readableListening=A.needReadable=!0,A.flowing=!1,A.emittedReadable=!1,l("on readable",A.length,A.reading),A.length?_e(this):A.reading||process.nextTick(ve,this)),E},v.prototype.addListener=v.prototype.on,v.prototype.removeListener=function(s,u){var E=r.prototype.removeListener.call(this,s,u);return s==="readable"&&process.nextTick(dt,this),E},v.prototype.removeAllListeners=function(s){var u=r.prototype.removeAllListeners.apply(this,arguments);return(s==="readable"||s===void 0)&&process.nextTick(dt,this),u};function dt(s){var u=s._readableState;u.readableListening=s.listenerCount("readable")>0,u.resumeScheduled&&!u.paused?u.flowing=!0:s.listenerCount("data")>0&&s.resume()}function ve(s){l("readable nexttick read 0"),s.read(0)}v.prototype.resume=function(){var s=this._readableState;return s.flowing||(l("resume"),s.flowing=!s.readableListening,jt(this,s)),s.paused=!1,this};function jt(s,u){u.resumeScheduled||(u.resumeScheduled=!0,process.nextTick(Ht,s,u))}function Ht(s,u){l("resume",u.reading),u.reading||s.read(0),u.resumeScheduled=!1,s.emit("resume"),b(s),u.flowing&&!u.reading&&s.read(0)}v.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function b(s){var u=s._readableState;for(l("flow",u.flowing);u.flowing&&s.read()!==null;);}v.prototype.wrap=function(s){var u=this,E=this._readableState,A=!1;s.on("end",function(){if(l("wrapped end"),E.decoder&&!E.ended){var H=E.decoder.end();H&&H.length&&u.push(H)}u.push(null)}),s.on("data",function(H){if(l("wrapped data"),E.decoder&&(H=E.decoder.write(H)),!(E.objectMode&&H==null)&&!(!E.objectMode&&(!H||!H.length))){var we=u.push(H);we||(A=!0,s.pause())}});for(var F in s)this[F]===void 0&&typeof s[F]=="function"&&(this[F]=function(we){return function(){return s[we].apply(s,arguments)}}(F));for(var U=0;U<B.length;U++)s.on(B[U],this.emit.bind(this,B[U]));return this._read=function(H){l("wrapped _read",H),A&&(A=!1,s.resume())},this},typeof Symbol=="function"&&(v.prototype[Symbol.asyncIterator]=function(){return O===void 0&&(O=Ca()),O(this)}),Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(v.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(v.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(u){this._readableState&&(this._readableState.flowing=u)}}),v._fromList=m,Object.defineProperty(v.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function m(s,u){if(u.length===0)return null;var E;return u.objectMode?E=u.buffer.shift():!s||s>=u.length?(u.decoder?E=u.buffer.join(""):u.buffer.length===1?E=u.buffer.first():E=u.buffer.concat(u.length),u.buffer.clear()):E=u.buffer.consume(s,u.decoder),E}function I(s){var u=s._readableState;l("endReadable",u.endEmitted),u.endEmitted||(u.ended=!0,process.nextTick(L,u,s))}function L(s,u){if(l("endReadableNT",s.endEmitted,s.length),!s.endEmitted&&s.length===0&&(s.endEmitted=!0,u.readable=!1,u.emit("end"),s.autoDestroy)){var E=u._writableState;(!E||E.autoDestroy&&E.finished)&&u.destroy()}}typeof Symbol=="function"&&(v.from=function(s,u){return w===void 0&&(w=Ra()),w(v,s,u)});function x(s,u){for(var E=0,A=s.length;E<A;E++)if(s[E]===u)return E;return-1}return rr}var ni=ce,It=Se.codes,Sa=It.ERR_METHOD_NOT_IMPLEMENTED,Ea=It.ERR_MULTIPLE_CALLBACK,wa=It.ERR_TRANSFORM_ALREADY_TRANSFORMING,Oa=It.ERR_TRANSFORM_WITH_LENGTH_0,Dt=Pe();fe(ce,Dt);function Ia(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new Ea);r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function ce(e){if(!(this instanceof ce))return new ce(e);Dt.call(this,e),this._transformState={afterTransform:Ia.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",Da)}function Da(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(t,r){$r(e,t,r)}):$r(this,null,null)}ce.prototype.push=function(e,t){return this._transformState.needTransform=!1,Dt.prototype.push.call(this,e,t)};ce.prototype._transform=function(e,t,r){r(new Sa("_transform()"))};ce.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};ce.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};ce.prototype._destroy=function(e,t){Dt.prototype._destroy.call(this,e,function(r){t(r)})};function $r(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Oa;if(e._transformState.transforming)throw new wa;return e.push(null)}var Aa=Ye,ii=ni;fe(Ye,ii);function Ye(e){if(!(this instanceof Ye))return new Ye(e);ii.call(this,e)}Ye.prototype._transform=function(e,t,r){r(null,e)};var nr;function Ba(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var oi=Se.codes,Pa=oi.ERR_MISSING_ARGS,Ma=oi.ERR_STREAM_DESTROYED;function qr(e){if(e)throw e}function Na(e){return e.setHeader&&typeof e.abort=="function"}function La(e,t,r,n){n=Ba(n);var i=!1;e.on("close",function(){i=!0}),nr===void 0&&(nr=Rr),nr(e,{readable:t,writable:r},function(a){if(a)return n(a);i=!0,n()});var o=!1;return function(a){if(!i&&!o){if(o=!0,Na(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();n(a||new Ma("pipe"))}}}function Wr(e){e()}function Ua(e,t){return e.pipe(t)}function xa(e){return!e.length||typeof e[e.length-1]!="function"?qr:e.pop()}function Ka(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=xa(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Pa("streams");var i,o=t.map(function(a,c){var l=c<t.length-1,d=c>0;return La(a,l,d,function(T){i||(i=T),T&&o.forEach(Wr),!l&&(o.forEach(Wr),n(i))})});return t.reduce(Ua)}var ja=Ka;(function(e,t){t=e.exports=ri(),t.Stream=t,t.Readable=t,t.Writable=ei(),t.Duplex=Pe(),t.Transform=ni,t.PassThrough=Aa,t.finished=Rr,t.pipeline=ja})(cr,cr.exports);var Ha=cr.exports,Tt=Ue.Buffer,ai=Ha.Transform,Fa=fe;function ka(e,t){if(!Tt.isBuffer(e)&&typeof e!="string")throw new TypeError(t+" must be a string or a buffer")}function ye(e){ai.call(this),this._block=Tt.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}Fa(ye,ai);ye.prototype._transform=function(e,t,r){var n=null;try{this.update(e,t)}catch(i){n=i}r(n)};ye.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(r){t=r}e(t)};ye.prototype.update=function(e,t){if(ka(e,"Data"),this._finalized)throw new Error("Digest already called");Tt.isBuffer(e)||(e=Tt.from(e,t));for(var r=this._block,n=0;this._blockOffset+e.length-n>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)r[i++]=e[n++];this._update(),this._blockOffset=0}for(;n<e.length;)r[this._blockOffset++]=e[n++];for(var o=0,a=e.length*8;a>0;++o)this._length[o]+=a,a=this._length[o]/4294967296|0,a>0&&(this._length[o]-=4294967296*a);return this};ye.prototype._update=function(){throw new Error("_update is not implemented")};ye.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();e!==void 0&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t};ye.prototype._digest=function(){throw new Error("_digest is not implemented")};var si=ye,Xa=fe,fi=si,$a=Ue.Buffer,qa=new Array(16);function At(){fi.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}Xa(At,fi);At.prototype._update=function(){for(var e=qa,t=0;t<16;++t)e[t]=this._block.readInt32LE(t*4);var r=this._a,n=this._b,i=this._c,o=this._d;r=Q(r,n,i,o,e[0],3614090360,7),o=Q(o,r,n,i,e[1],3905402710,12),i=Q(i,o,r,n,e[2],606105819,17),n=Q(n,i,o,r,e[3],3250441966,22),r=Q(r,n,i,o,e[4],4118548399,7),o=Q(o,r,n,i,e[5],1200080426,12),i=Q(i,o,r,n,e[6],2821735955,17),n=Q(n,i,o,r,e[7],4249261313,22),r=Q(r,n,i,o,e[8],1770035416,7),o=Q(o,r,n,i,e[9],2336552879,12),i=Q(i,o,r,n,e[10],4294925233,17),n=Q(n,i,o,r,e[11],2304563134,22),r=Q(r,n,i,o,e[12],1804603682,7),o=Q(o,r,n,i,e[13],4254626195,12),i=Q(i,o,r,n,e[14],2792965006,17),n=Q(n,i,o,r,e[15],1236535329,22),r=z(r,n,i,o,e[1],4129170786,5),o=z(o,r,n,i,e[6],3225465664,9),i=z(i,o,r,n,e[11],643717713,14),n=z(n,i,o,r,e[0],3921069994,20),r=z(r,n,i,o,e[5],3593408605,5),o=z(o,r,n,i,e[10],38016083,9),i=z(i,o,r,n,e[15],3634488961,14),n=z(n,i,o,r,e[4],3889429448,20),r=z(r,n,i,o,e[9],568446438,5),o=z(o,r,n,i,e[14],3275163606,9),i=z(i,o,r,n,e[3],4107603335,14),n=z(n,i,o,r,e[8],1163531501,20),r=z(r,n,i,o,e[13],2850285829,5),o=z(o,r,n,i,e[2],4243563512,9),i=z(i,o,r,n,e[7],1735328473,14),n=z(n,i,o,r,e[12],2368359562,20),r=J(r,n,i,o,e[5],4294588738,4),o=J(o,r,n,i,e[8],2272392833,11),i=J(i,o,r,n,e[11],1839030562,16),n=J(n,i,o,r,e[14],4259657740,23),r=J(r,n,i,o,e[1],2763975236,4),o=J(o,r,n,i,e[4],1272893353,11),i=J(i,o,r,n,e[7],4139469664,16),n=J(n,i,o,r,e[10],3200236656,23),r=J(r,n,i,o,e[13],681279174,4),o=J(o,r,n,i,e[0],3936430074,11),i=J(i,o,r,n,e[3],3572445317,16),n=J(n,i,o,r,e[6],76029189,23),r=J(r,n,i,o,e[9],3654602809,4),o=J(o,r,n,i,e[12],3873151461,11),i=J(i,o,r,n,e[15],530742520,16),n=J(n,i,o,r,e[2],3299628645,23),r=ee(r,n,i,o,e[0],4096336452,6),o=ee(o,r,n,i,e[7],1126891415,10),i=ee(i,o,r,n,e[14],2878612391,15),n=ee(n,i,o,r,e[5],4237533241,21),r=ee(r,n,i,o,e[12],1700485571,6),o=ee(o,r,n,i,e[3],2399980690,10),i=ee(i,o,r,n,e[10],4293915773,15),n=ee(n,i,o,r,e[1],2240044497,21),r=ee(r,n,i,o,e[8],1873313359,6),o=ee(o,r,n,i,e[15],4264355552,10),i=ee(i,o,r,n,e[6],2734768916,15),n=ee(n,i,o,r,e[13],1309151649,21),r=ee(r,n,i,o,e[4],4149444226,6),o=ee(o,r,n,i,e[11],3174756917,10),i=ee(i,o,r,n,e[2],718787259,15),n=ee(n,i,o,r,e[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+o|0};At.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=$a.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e};function Bt(e,t){return e<<t|e>>>32-t}function Q(e,t,r,n,i,o,a){return Bt(e+(t&r|~t&n)+i+o|0,a)+t|0}function z(e,t,r,n,i,o,a){return Bt(e+(t&n|r&~n)+i+o|0,a)+t|0}function J(e,t,r,n,i,o,a){return Bt(e+(t^r^n)+i+o|0,a)+t|0}function ee(e,t,r,n,i,o,a){return Bt(e+(r^(t|~n))+i+o|0,a)+t|0}var Wa=At,ir=ot.Buffer,Ga=fe,ui=si,Ya=new Array(16),He=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Fe=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],ke=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Xe=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],$e=[0,1518500249,1859775393,2400959708,2840853838],qe=[1352829926,1548603684,1836072691,2053994217,0];function Pt(){ui.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}Ga(Pt,ui);Pt.prototype._update=function(){for(var e=Ya,t=0;t<16;++t)e[t]=this._block.readInt32LE(t*4);for(var r=this._a|0,n=this._b|0,i=this._c|0,o=this._d|0,a=this._e|0,c=this._a|0,l=this._b|0,d=this._c|0,T=this._d|0,g=this._e|0,_=0;_<80;_+=1){var h,y;_<16?(h=Gr(r,n,i,o,a,e[He[_]],$e[0],ke[_]),y=Qr(c,l,d,T,g,e[Fe[_]],qe[0],Xe[_])):_<32?(h=Yr(r,n,i,o,a,e[He[_]],$e[1],ke[_]),y=Zr(c,l,d,T,g,e[Fe[_]],qe[1],Xe[_])):_<48?(h=Vr(r,n,i,o,a,e[He[_]],$e[2],ke[_]),y=Vr(c,l,d,T,g,e[Fe[_]],qe[2],Xe[_])):_<64?(h=Zr(r,n,i,o,a,e[He[_]],$e[3],ke[_]),y=Yr(c,l,d,T,g,e[Fe[_]],qe[3],Xe[_])):(h=Qr(r,n,i,o,a,e[He[_]],$e[4],ke[_]),y=Gr(c,l,d,T,g,e[Fe[_]],qe[4],Xe[_])),r=a,a=o,o=Te(i,10),i=n,n=h,c=g,g=T,T=Te(d,10),d=l,l=y}var C=this._b+i+T|0;this._b=this._c+o+g|0,this._c=this._d+a+c|0,this._d=this._e+r+l|0,this._e=this._a+n+d|0,this._a=C};Pt.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=ir.alloc?ir.alloc(20):new ir(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e};function Te(e,t){return e<<t|e>>>32-t}function Gr(e,t,r,n,i,o,a,c){return Te(e+(t^r^n)+o+a|0,c)+i|0}function Yr(e,t,r,n,i,o,a,c){return Te(e+(t&r|~t&n)+o+a|0,c)+i|0}function Vr(e,t,r,n,i,o,a,c){return Te(e+((t|~r)^n)+o+a|0,c)+i|0}function Zr(e,t,r,n,i,o,a,c){return Te(e+(t&n|r&~n)+o+a|0,c)+i|0}function Qr(e,t,r,n,i,o,a,c){return Te(e+(t^(r|~n))+o+a|0,c)+i|0}var Va=Pt,ci=Ue.Buffer,li=vr.Transform,Za=bt.StringDecoder,Qa=fe;function ae(e){li.call(this),this.hashMode=typeof e=="string",this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}Qa(ae,li);ae.prototype.update=function(e,t,r){typeof e=="string"&&(e=ci.from(e,t));var n=this._update(e);return this.hashMode?this:(r&&(n=this._toString(n,r)),n)};ae.prototype.setAutoPadding=function(){};ae.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")};ae.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")};ae.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")};ae.prototype._transform=function(e,t,r){var n;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(i){n=i}finally{r(n)}};ae.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(r){t=r}e(t)};ae.prototype._finalOrDigest=function(e){var t=this.__final()||ci.alloc(0);return e&&(t=this._toString(t,e,!0)),t};ae.prototype._toString=function(e,t,r){if(this._decoder||(this._decoder=new Za(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var n=this._decoder.write(e);return r&&(n+=this._decoder.end()),n};var za=ae,Ja=fe,es=Wa,ts=Va,rs=Ki,di=za;function Mt(e){di.call(this,"digest"),this._hash=e}Ja(Mt,di);Mt.prototype._update=function(e){this._hash.update(e)};Mt.prototype._final=function(){return this._hash.digest()};var ns=function(t){return t=t.toLowerCase(),t==="md5"?new es:t==="rmd160"||t==="ripemd160"?new ts:new Mt(rs(t))},yt=Ue.Buffer;function is(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),o=i.charCodeAt(0);if(t[o]!==255)throw new TypeError(i+" is ambiguous");t[o]=n}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function T(h){if((Array.isArray(h)||h instanceof Uint8Array)&&(h=yt.from(h)),!yt.isBuffer(h))throw new TypeError("Expected Buffer");if(h.length===0)return"";for(var y=0,C=0,R=0,S=h.length;R!==S&&h[R]===0;)R++,y++;for(var D=(S-R)*d+1>>>0,O=new Uint8Array(D);R!==S;){for(var w=h[R],M=0,B=D-1;(w!==0||M<C)&&B!==-1;B--,M++)w+=256*O[B]>>>0,O[B]=w%a>>>0,w=w/a>>>0;if(w!==0)throw new Error("Non-zero carry");C=M,R++}for(var f=D-C;f!==D&&O[f]===0;)f++;for(var p=c.repeat(y);f<D;++f)p+=e.charAt(O[f]);return p}function g(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return yt.alloc(0);for(var y=0,C=0,R=0;h[y]===c;)C++,y++;for(var S=(h.length-y)*l+1>>>0,D=new Uint8Array(S);h[y];){var O=t[h.charCodeAt(y)];if(O===255)return;for(var w=0,M=S-1;(O!==0||w<R)&&M!==-1;M--,w++)O+=a*D[M]>>>0,D[M]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");R=w,y++}for(var B=S-R;B!==S&&D[B]===0;)B++;var f=yt.allocUnsafe(C+(S-B));f.fill(0,0,C);for(var p=C;B!==S;)f[p++]=D[B++];return f}function _(h){var y=g(h);if(y)return y;throw new Error("Non-base"+a+" character")}return{encode:T,decodeUnsafe:g,decode:_}}var os=is,as=os,ss="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",fs=as(ss),or=fs,us=Ue.Buffer,cs=function(e){function t(o){var a=e(o);return or.encode(us.concat([o,a],o.length+4))}function r(o){var a=o.slice(0,-4),c=o.slice(-4),l=e(a);if(!(c[0]^l[0]|c[1]^l[1]|c[2]^l[2]|c[3]^l[3]))return a}function n(o){var a=or.decodeUnsafe(o);if(a)return r(a)}function i(o){var a=or.decode(o),c=r(a);if(!c)throw new Error("Invalid checksum");return c}return{encode:t,decode:i,decodeUnsafe:n}},zr=ns,ls=cs;function ds(e){var t=zr("sha256").update(e).digest();return zr("sha256").update(t).digest()}var hs=ls(ds),Ct={},q={},se={},Sr=X&&X.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(se,"__esModule",{value:!0});se.URDecoder=se.UREncoder=se.UR=void 0;const ps=Sr(ji);se.UR=ps.default;const ys=Sr(Hi);se.UREncoder=ys.default;const gs=Sr(Fi);se.URDecoder=gs.default;Object.defineProperty(q,"__esModule",{value:!0});q.RegistryItem=void 0;const Jr=se,_s=$;class vs{constructor(){this.toCBOR=()=>{if(this.toDataItem()===void 0)throw new Error(`#[ur-registry][RegistryItem][fn.toCBOR]: registry ${this.getRegistryType()}'s method toDataItem returns undefined`);return(0,_s.encodeDataItem)(this.toDataItem())},this.toUR=()=>new Jr.UR(this.toCBOR(),this.getRegistryType().getType()),this.toUREncoder=(t,r,n)=>{const i=this.toUR();return new Jr.UREncoder(i,t,r,n)}}}q.RegistryItem=vs;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CryptoCoinInfo=e.Network=e.Type=void 0;const t=$,r=q,n=k;var i;(function(l){l.type="1",l.network="2"})(i||(i={}));var o;(function(l){l[l.bitcoin=0]="bitcoin"})(o=e.Type||(e.Type={}));var a;(function(l){l[l.mainnet=0]="mainnet",l[l.testnet=1]="testnet"})(a=e.Network||(e.Network={}));class c extends r.RegistryItem{constructor(d,T){super(),this.type=d,this.network=T,this.getRegistryType=()=>n.RegistryTypes.CRYPTO_COIN_INFO,this.getType=()=>this.type||o.bitcoin,this.getNetwork=()=>this.network||a.mainnet,this.toDataItem=()=>{const g={};return this.type&&(g[i.type]=this.type),this.network&&(g[i.network]=this.network),new t.DataItem(g)}}}e.CryptoCoinInfo=c,c.fromDataItem=l=>{const d=l.getData(),T=d[i.type],g=d[i.network];return new c(T,g)},c.fromCBOR=l=>{const d=(0,t.decodeToDataItem)(l);return c.fromDataItem(d)}})(Ct);var Ce={},Me={};Object.defineProperty(Me,"__esModule",{value:!0});Me.PathComponent=void 0;class Nt{constructor(t){if(this.getIndex=()=>this.index,this.isWildcard=()=>this.wildcard,this.isHardened=()=>this.hardened,this.index=t.index,this.hardened=t.hardened,this.index!==void 0?this.wildcard=!1:this.wildcard=!0,this.index&&this.index&Nt.HARDENED_BIT)throw new Error(`#[ur-registry][PathComponent][fn.constructor]: Invalid index ${this.index} - most significant bit cannot be set`)}}Me.PathComponent=Nt;Nt.HARDENED_BIT=2147483648;Object.defineProperty(Ce,"__esModule",{value:!0});Ce.CryptoKeypath=void 0;const hi=$,en=Me,ms=q,bs=k;var de;(function(e){e[e.components=1]="components",e[e.source_fingerprint=2]="source_fingerprint",e[e.depth=3]="depth"})(de||(de={}));class Ve extends ms.RegistryItem{constructor(t=[],r,n){super(),this.components=t,this.sourceFingerprint=r,this.depth=n,this.getRegistryType=()=>bs.RegistryTypes.CRYPTO_KEYPATH,this.getPath=()=>this.components.length===0?void 0:this.components.map(o=>`${o.isWildcard()?"*":o.getIndex()}${o.isHardened()?"'":""}`).join("/"),this.getComponents=()=>this.components,this.getSourceFingerprint=()=>this.sourceFingerprint,this.getDepth=()=>this.depth,this.toDataItem=()=>{const i={},o=[];return this.components&&this.components.forEach(a=>{a.isWildcard()?o.push([]):o.push(a.getIndex()),o.push(a.isHardened())}),i[de.components]=o,this.sourceFingerprint&&(i[de.source_fingerprint]=this.sourceFingerprint.readUInt32BE(0)),this.depth!==void 0&&(i[de.depth]=this.depth),new hi.DataItem(i)}}}Ce.CryptoKeypath=Ve;Ve.fromDataItem=e=>{const t=e.getData(),r=[],n=t[de.components];if(n)for(let c=0;c<n.length;c+=2){const l=n[c+1],d=n[c];typeof d=="number"?r.push(new en.PathComponent({index:d,hardened:l})):r.push(new en.PathComponent({hardened:l}))}const i=t[de.source_fingerprint];let o;i&&(o=Buffer.alloc(4),o.writeUInt32BE(i,0));const a=t[de.depth];return new Ve(r,o,a)};Ve.fromCBOR=e=>{const t=(0,hi.decodeToDataItem)(e);return Ve.fromDataItem(t)};Object.defineProperty(pe,"__esModule",{value:!0});pe.CryptoHDKey=void 0;const Ts=hs,Cs=Ct,tn=Ce,pi=$,Rs=q,Ss=k;var j;(function(e){e[e.is_master=1]="is_master",e[e.is_private=2]="is_private",e[e.key_data=3]="key_data",e[e.chain_code=4]="chain_code",e[e.use_info=5]="use_info",e[e.origin=6]="origin",e[e.children=7]="children",e[e.parent_fingerprint=8]="parent_fingerprint",e[e.name=9]="name",e[e.note=10]="note"})(j||(j={}));class Ze extends Rs.RegistryItem{constructor(t){super(),this.isECKey=()=>!1,this.getKey=()=>this.key,this.getChainCode=()=>this.chainCode,this.isMaster=()=>this.master,this.isPrivateKey=()=>!!this.privateKey,this.getUseInfo=()=>this.useInfo,this.getOrigin=()=>this.origin,this.getChildren=()=>this.children,this.getParentFingerprint=()=>this.parentFingerprint,this.getName=()=>this.name,this.getNote=()=>this.note,this.getBip32Key=()=>{var r,n,i;let o,a,c=0,l=Buffer.alloc(4).fill(0);if(this.isMaster())o=Buffer.from("0488ADE4","hex"),a=0,c=0;else{a=((r=this.getOrigin())===null||r===void 0?void 0:r.getComponents().length)||((n=this.getOrigin())===null||n===void 0?void 0:n.getDepth());const h=(i=this.getOrigin())===null||i===void 0?void 0:i.getComponents(),y=h[h.length-1];y&&(c=y.isHardened()?y.getIndex()+2147483648:y.getIndex(),this.getParentFingerprint()&&(l=this.getParentFingerprint())),this.isPrivateKey()?o=Buffer.from("0488ADE4","hex"):o=Buffer.from("0488B21E","hex")}const d=Buffer.alloc(1);d.writeUInt8(a,0);const T=Buffer.alloc(4);T.writeUInt32BE(c,0);const g=this.getChainCode(),_=this.getKey();return(0,Ts.encode)(Buffer.concat([o,d,l,T,g,_]))},this.getRegistryType=()=>Ss.RegistryTypes.CRYPTO_HDKEY,this.getOutputDescriptorContent=()=>{var r,n,i,o,a,c,l;let d="";return this.getOrigin()&&!((r=this.getOrigin())===null||r===void 0)&&r.getSourceFingerprint()&&!((n=this.getOrigin())===null||n===void 0)&&n.getPath()&&(d+=`${(o=(i=this.getOrigin())===null||i===void 0?void 0:i.getSourceFingerprint())===null||o===void 0?void 0:o.toString("hex")}/${(a=this.getOrigin())===null||a===void 0?void 0:a.getPath()}`),d+=this.getBip32Key(),this.getChildren()&&!((c=this.getChildren())===null||c===void 0)&&c.getPath()&&(d+=`/${(l=this.getChildren())===null||l===void 0?void 0:l.getPath()}`),d},this.setupMasterKey=r=>{this.master=!0,this.key=r.key,this.chainCode=r.chainCode},this.setupDeriveKey=r=>{this.master=!1,this.privateKey=r.isPrivateKey,this.key=r.key,this.chainCode=r.chainCode,this.useInfo=r.useInfo,this.origin=r.origin,this.children=r.children,this.parentFingerprint=r.parentFingerprint,this.name=r.name,this.note=r.note},this.toDataItem=()=>{const r={};if(this.master)r[j.is_master]=!0,r[j.key_data]=this.key,r[j.chain_code]=this.chainCode;else{if(this.privateKey!==void 0&&(r[j.is_private]=this.privateKey),r[j.key_data]=this.key,this.chainCode&&(r[j.chain_code]=this.chainCode),this.useInfo){const n=this.useInfo.toDataItem();n.setTag(this.useInfo.getRegistryType().getTag()),r[j.use_info]=n}if(this.origin){const n=this.origin.toDataItem();n.setTag(this.origin.getRegistryType().getTag()),r[j.origin]=n}if(this.children){const n=this.children.toDataItem();n.setTag(this.children.getRegistryType().getTag()),r[j.children]=n}this.parentFingerprint&&(r[j.parent_fingerprint]=this.parentFingerprint.readUInt32BE(0)),this.name!==void 0&&(r[j.name]=this.name),this.note!==void 0&&(r[j.note]=this.note)}return new pi.DataItem(r)},t.isMaster?this.setupMasterKey(t):this.setupDeriveKey(t)}}pe.CryptoHDKey=Ze;Ze.fromDataItem=e=>{const t=e.getData(),r=!!t[j.is_master],n=t[j.is_private],i=t[j.key_data],o=t[j.chain_code],a=t[j.use_info]?Cs.CryptoCoinInfo.fromDataItem(t[j.use_info]):void 0,c=t[j.origin]?tn.CryptoKeypath.fromDataItem(t[j.origin]):void 0,l=t[j.children]?tn.CryptoKeypath.fromDataItem(t[j.children]):void 0,d=t[j.parent_fingerprint];let T;d&&(T=Buffer.alloc(4),T.writeUInt32BE(d,0));const g=t[j.name],_=t[j.note];return new Ze({isMaster:r,isPrivateKey:n,key:i,chainCode:o,useInfo:a,origin:c,children:l,parentFingerprint:T,name:g,note:_})};Ze.fromCBOR=e=>{const t=(0,pi.decodeToDataItem)(e);return Ze.fromDataItem(t)};var Re={};Object.defineProperty(Re,"__esModule",{value:!0});Re.CryptoECKey=void 0;const yi=$,Es=q,ws=k;var he;(function(e){e[e.curve=1]="curve",e[e.private=2]="private",e[e.data=3]="data"})(he||(he={}));class Qe extends Es.RegistryItem{constructor(t){super(),this.isECKey=()=>!0,this.getCurve=()=>this.curve||0,this.isPrivateKey=()=>this.privateKey||!1,this.getData=()=>this.data,this.getRegistryType=()=>ws.RegistryTypes.CRYPTO_ECKEY,this.toDataItem=()=>{const r={};return this.curve&&(r[he.curve]=this.curve),this.privateKey!==void 0&&(r[he.private]=this.privateKey),r[he.data]=this.data,new yi.DataItem(r)},this.getOutputDescriptorContent=()=>this.data.toString("hex"),this.data=t.data,this.curve=t.curve,this.privateKey=t.privateKey||void 0}}Re.CryptoECKey=Qe;Qe.fromDataItem=e=>{const t=e.getData(),r=t[he.curve],n=t[he.private],i=t[he.data];if(!i)throw new Error(`#[ur-registry][CryptoECKey][fn.fromDataItem]: decoded [dataItem][#data.data] is undefined: ${e}`);return new Qe({data:i,curve:r,privateKey:n})};Qe.fromCBOR=e=>{const t=(0,yi.decodeToDataItem)(e);return Qe.fromDataItem(t)};var Lt={};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.Bytes=void 0;const gi=$,Os=q,Is=k;class ze extends Os.RegistryItem{constructor(t){super(),this.bytes=t,this.getRegistryType=()=>Is.RegistryTypes.BYTES,this.getData=()=>this.bytes,this.toDataItem=()=>new gi.DataItem(this.bytes)}}Lt.Bytes=ze;ze.fromDataItem=e=>{const t=e.getData();if(!t)throw new Error(`#[ur-registry][Bytes][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new ze(t)};ze.fromCBOR=e=>{const t=(0,gi.decodeToDataItem)(e);return ze.fromDataItem(t)};var Je={},Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.MultiKey=void 0;const Ds=Re,As=pe,Bs=xe,Ps=q,rn=k;var Le;(function(e){e[e.threshold=1]="threshold",e[e.keys=2]="keys"})(Le||(Le={}));class dr extends Ps.RegistryItem{constructor(t,r){super(),this.threshold=t,this.keys=r,this.getThreshold=()=>this.threshold,this.getKeys=()=>this.keys,this.toDataItem=()=>{const n={};n[Le.threshold]=this.threshold;const i=this.keys.map(o=>{const a=o.toDataItem();return a.setTag(o.getRegistryType().getTag()),a});return n[Le.keys]=i,new Bs.DataItem(n)},this.getOutputDescriptorContent=()=>[this.getThreshold(),this.keys.map(n=>n.getOutputDescriptorContent()).join(",")].join(",")}}Ne.MultiKey=dr;dr.fromDataItem=e=>{const t=e.getData(),r=t[Le.threshold],n=t[Le.keys],i=[];return n.forEach(o=>{o.getTag()===rn.RegistryTypes.CRYPTO_HDKEY.getTag()?i.push(As.CryptoHDKey.fromDataItem(o)):o.getTag()===rn.RegistryTypes.CRYPTO_ECKEY.getTag()&&i.push(Ds.CryptoECKey.fromDataItem(o))}),new dr(r,i)};Object.defineProperty(Je,"__esModule",{value:!0});Je.CryptoOutput=void 0;const hr=Re,pr=pe,Er=$,_i=Ne,Ms=q,vi=k,ar=wt;class be extends Ms.RegistryItem{constructor(t,r){super(),this.scriptExpressions=t,this.cryptoKey=r,this.getRegistryType=()=>vi.RegistryTypes.CRYPTO_OUTPUT,this.getCryptoKey=()=>this.cryptoKey,this.getHDKey=()=>{if(this.cryptoKey instanceof pr.CryptoHDKey)return this.cryptoKey},this.getECKey=()=>{if(this.cryptoKey instanceof hr.CryptoECKey)return this.cryptoKey},this.getMultiKey=()=>{if(this.cryptoKey instanceof _i.MultiKey)return this.cryptoKey},this.getScriptExpressions=()=>this.scriptExpressions,this._toOutputDescriptor=n=>n>=this.scriptExpressions.length?this.cryptoKey.getOutputDescriptorContent():`${this.scriptExpressions[n].getExpression()}(${this._toOutputDescriptor(n+1)})`,this.toString=()=>this._toOutputDescriptor(0),this.toDataItem=()=>{let n=this.cryptoKey.toDataItem();return(this.cryptoKey instanceof hr.CryptoECKey||this.cryptoKey instanceof pr.CryptoHDKey)&&n.setTag(this.cryptoKey.getRegistryType().getTag()),[...this.scriptExpressions].reverse().forEach(o=>{const a=o.getTag();n.getTag()===void 0?n.setTag(a):n=new Er.DataItem(n,a)}),n}}}Je.CryptoOutput=be;be.fromDataItem=e=>{const t=[];let r=e;for(;;){let o=r.getTag();const a=ar.ScriptExpression.fromTag(o);if(a)if(t.push(a),r.getData()instanceof Er.DataItem)r=r.getData(),o=r.getTag();else break;else break}const n=t.length;if(n>0&&(t[n-1].getExpression()===ar.ScriptExpressions.MULTISIG.getExpression()||t[n-1].getExpression()===ar.ScriptExpressions.SORTED_MULTISIG.getExpression())){const o=_i.MultiKey.fromDataItem(r);return new be(t,o)}if(r.getTag()===vi.RegistryTypes.CRYPTO_HDKEY.getTag()){const o=pr.CryptoHDKey.fromDataItem(r);return new be(t,o)}else{const o=hr.CryptoECKey.fromDataItem(r);return new be(t,o)}};be.fromCBOR=e=>{const t=(0,Er.decodeToDataItem)(e);return be.fromDataItem(t)};var et={};Object.defineProperty(et,"__esModule",{value:!0});et.CryptoPSBT=void 0;const mi=$,Ns=q,Ls=k;class tt extends Ns.RegistryItem{constructor(t){super(),this.psbt=t,this.getRegistryType=()=>Ls.RegistryTypes.CRYPTO_PSBT,this.getPSBT=()=>this.psbt,this.toDataItem=()=>new mi.DataItem(this.psbt)}}et.CryptoPSBT=tt;tt.fromDataItem=e=>{const t=e.getData();if(!t)throw new Error(`#[ur-registry][CryptoPSBT][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new tt(t)};tt.fromCBOR=e=>{const t=(0,mi.decodeToDataItem)(e);return tt.fromDataItem(t)};var We={},nn;function on(){if(nn)return We;nn=1,Object.defineProperty(We,"__esModule",{value:!0}),We.CryptoAccount=void 0;const e=Ut(),t=$,r=q,n=k;var i;(function(a){a[a.masterFingerprint=1]="masterFingerprint",a[a.outputDescriptors=2]="outputDescriptors"})(i||(i={}));let o=class extends r.RegistryItem{constructor(c,l){super(),this.masterFingerprint=c,this.outputDescriptors=l,this.getRegistryType=()=>n.RegistryTypes.CRYPTO_ACCOUNT,this.getMasterFingerprint=()=>this.masterFingerprint,this.getOutputDescriptors=()=>this.outputDescriptors,this.toDataItem=()=>{const d={};return this.masterFingerprint&&(d[i.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.outputDescriptors&&(d[i.outputDescriptors]=this.outputDescriptors.map(T=>T.toDataItem())),new t.DataItem(d)}}};return We.CryptoAccount=o,o.fromDataItem=a=>{const c=a.getData(),l=Buffer.alloc(4),d=c[i.masterFingerprint];d&&l.writeUInt32BE(d,0);const g=c[i.outputDescriptors].map(_=>e.CryptoOutput.fromDataItem(_));return new o(l,g)},o.fromCBOR=a=>{const c=(0,t.decodeToDataItem)(a);return o.fromDataItem(c)},We}var Ge={},st={};Object.defineProperty(st,"__esModule",{value:!0});st.UnknownURTypeError=void 0;class Us extends Error{constructor(t){super(t)}}st.UnknownURTypeError=Us;var an;function sn(){if(an)return Ge;an=1,Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.URRegistryDecoder=void 0;const e=se,t=Ut(),r=k,n=st;class i extends e.URDecoder{constructor(){super(...arguments),this.resultRegistryType=()=>{const a=this.resultUR();switch(a.type){case r.RegistryTypes.BYTES.getType():return t.Bytes.fromCBOR(a.cbor);case r.RegistryTypes.CRYPTO_HDKEY.getType():return t.CryptoHDKey.fromCBOR(a.cbor);case r.RegistryTypes.CRYPTO_KEYPATH.getType():return t.CryptoKeypath.fromCBOR(a.cbor);case r.RegistryTypes.CRYPTO_COIN_INFO.getType():return t.CryptoCoinInfo.fromCBOR(a.cbor);case r.RegistryTypes.CRYPTO_ECKEY.getType():return t.CryptoECKey.fromCBOR(a.cbor);case r.RegistryTypes.CRYPTO_OUTPUT.getType():return t.CryptoOutput.fromCBOR(a.cbor);case r.RegistryTypes.CRYPTO_PSBT.getType():return t.CryptoPSBT.fromCBOR(a.cbor);case r.RegistryTypes.CRYPTO_ACCOUNT.getType():return t.CryptoAccount.fromCBOR(a.cbor);default:throw new n.UnknownURTypeError(`#[ur-registry][Decoder][fn.resultRegistryType]: registry type ${a.type} is not supported now`)}}}}return Ge.URRegistryDecoder=i,Ge}var rt={};Object.defineProperty(rt,"__esModule",{value:!0});rt.CryptoMultiAccounts=void 0;const xs=k,Ks=pe,js=q,bi=$;var ie;(function(e){e[e.masterFingerprint=1]="masterFingerprint",e[e.keys=2]="keys",e[e.device=3]="device",e[e.deviceId=4]="deviceId",e[e.version=5]="version"})(ie||(ie={}));class nt extends js.RegistryItem{constructor(t,r,n,i,o){super(),this.masterFingerprint=t,this.keys=r,this.device=n,this.deviceId=i,this.version=o,this.getRegistryType=()=>xs.RegistryTypes.CRYPTO_MULTI_ACCOUNTS,this.getMasterFingerprint=()=>this.masterFingerprint,this.getKeys=()=>this.keys,this.getDevice=()=>this.device,this.getDeviceId=()=>this.deviceId,this.getVersion=()=>this.version,this.toDataItem=()=>{const a={};return this.masterFingerprint&&(a[ie.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.keys&&(a[ie.keys]=this.keys.map(c=>{const l=c.toDataItem();return l.setTag(c.getRegistryType().getTag()),l})),this.device&&(a[ie.device]=this.device),this.deviceId&&(a[ie.deviceId]=this.deviceId),this.version&&(a[ie.version]=this.version),new bi.DataItem(a)}}}rt.CryptoMultiAccounts=nt;nt.fromDataItem=e=>{const t=e.getData(),r=Buffer.alloc(4),n=t[ie.masterFingerprint];n&&r.writeUInt32BE(n,0);const o=t[ie.keys].map(d=>Ks.CryptoHDKey.fromDataItem(d)),a=t[ie.device],c=t[ie.deviceId],l=t[ie.version];return new nt(r,o,a,c,l)};nt.fromCBOR=e=>{const t=(0,bi.decodeToDataItem)(e);return nt.fromDataItem(t)};var Ti={},ft={},wr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.KeyDerivationSchema=e.DerivationAlgorithm=e.Curve=void 0;const t=k,r=q,n=$,i=Ce;var o;(function(d){d[d.keyPath=1]="keyPath",d[d.curve=2]="curve",d[d.algo=3]="algo"})(o||(o={}));var a;(function(d){d[d.secp256k1=0]="secp256k1",d[d.ed25519=1]="ed25519"})(a=e.Curve||(e.Curve={}));var c;(function(d){d[d.slip10=0]="slip10",d[d.bip32ed25519=1]="bip32ed25519"})(c=e.DerivationAlgorithm||(e.DerivationAlgorithm={}));class l extends r.RegistryItem{constructor(T,g=a.secp256k1,_=c.slip10){super(),this.keypath=T,this.curve=g,this.algo=_,this.getRegistryType=()=>t.RegistryTypes.KEY_DERIVATION_SCHEMA,this.getKeypath=()=>this.keypath,this.getCurve=()=>this.curve,this.getAlgo=()=>this.algo,this.toDataItem=()=>{const h={},y=this.getKeypath().toDataItem();return y.setTag(this.getKeypath().getRegistryType().getTag()),h[o.keyPath]=y,h[o.curve]=this.curve,h[o.algo]=this.algo,new n.DataItem(h)}}}e.KeyDerivationSchema=l,l.fromDataItem=d=>{const T=d.getData(),g=i.CryptoKeypath.fromDataItem(T[o.keyPath]),_=T[o.curve],h=T[o.algo];return new l(g,_,h)},l.fromCBOR=d=>{const T=(0,n.decodeToDataItem)(d);return l.fromDataItem(T)}})(wr);Object.defineProperty(ft,"__esModule",{value:!0});ft.KeyDerivation=void 0;const Hs=k,Fs=q,Ci=$,ks=wr;var Rt;(function(e){e[e.schemas=1]="schemas"})(Rt||(Rt={}));class it extends Fs.RegistryItem{constructor(t){super(),this.schemas=t,this.getRegistryType=()=>Hs.RegistryTypes.KEY_DERIVATION_CALL,this.getSchemas=()=>this.schemas,this.toDataItem=()=>{const r={};return r[Rt.schemas]=this.schemas.map(n=>{const i=n.toDataItem();return i.setTag(n.getRegistryType().getTag()),i}),new Ci.DataItem(r)}}}ft.KeyDerivation=it;it.fromDataItem=e=>{const r=e.getData()[Rt.schemas].map(n=>ks.KeyDerivationSchema.fromDataItem(n));return new it(r)};it.fromCBOR=e=>{const t=(0,Ci.decodeToDataItem)(e);return it.fromDataItem(t)};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.QRHardwareCall=e.QRHardwareCallType=void 0;const t=k,r=q,n=$,i=ft;var o;(function(l){l[l.type=1]="type",l[l.params=2]="params",l[l.origin=3]="origin"})(o||(o={}));var a;(function(l){l[l.KeyDerivation=0]="KeyDerivation"})(a=e.QRHardwareCallType||(e.QRHardwareCallType={}));class c extends r.RegistryItem{constructor(d,T,g){super(),this.type=d,this.params=T,this.origin=g,this.getRegistryType=()=>t.RegistryTypes.QR_HARDWARE_CALL,this.getType=()=>this.type,this.getParams=()=>this.params,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const _={};_[o.type]=this.type;const h=this.params.toDataItem();return h.setTag(this.params.getRegistryType().getTag()),_[o.params]=h,this.origin&&(_[o.origin]=this.origin),new n.DataItem(_)}}}e.QRHardwareCall=c,c.fromDataItem=l=>{const d=l.getData(),T=d[o.type]||a.KeyDerivation;let g;switch(T){case a.KeyDerivation:g=i.KeyDerivation.fromDataItem(d[o.params])}const _=d[o.origin];return new c(T,g,_)},c.fromCBOR=l=>{const d=(0,n.decodeToDataItem)(l);return c.fromDataItem(d)}})(Ti);var Ri={};Object.defineProperty(Ri,"__esModule",{value:!0});var fn;function Ut(){return fn||(fn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Buffer=e.extend=e.PathComponent=e.ScriptExpressions=e.MultiKey=e.CryptoPSBT=e.CryptoOutput=e.CryptoECKey=e.CryptoCoinInfoNetwork=e.CryptoCoinInfoType=e.CryptoCoinInfo=e.CryptoKeypath=e.CryptoMultiAccounts=e.CryptoHDKey=e.CryptoAccount=e.Bytes=e.URRegistryDecoder=e.DataItem=void 0;const t=Po,r=ot;Object.defineProperty(e,"Buffer",{enumerable:!0,get:function(){return r.Buffer}});const n=pe;Object.defineProperty(e,"CryptoHDKey",{enumerable:!0,get:function(){return n.CryptoHDKey}});const i=Ce;Object.defineProperty(e,"CryptoKeypath",{enumerable:!0,get:function(){return i.CryptoKeypath}});const o=Ct;Object.defineProperty(e,"CryptoCoinInfo",{enumerable:!0,get:function(){return o.CryptoCoinInfo}}),Object.defineProperty(e,"CryptoCoinInfoType",{enumerable:!0,get:function(){return o.Type}}),Object.defineProperty(e,"CryptoCoinInfoNetwork",{enumerable:!0,get:function(){return o.Network}});const a=Re;Object.defineProperty(e,"CryptoECKey",{enumerable:!0,get:function(){return a.CryptoECKey}});const c=Lt;Object.defineProperty(e,"Bytes",{enumerable:!0,get:function(){return c.Bytes}});const l=Je;Object.defineProperty(e,"CryptoOutput",{enumerable:!0,get:function(){return l.CryptoOutput}});const d=et;Object.defineProperty(e,"CryptoPSBT",{enumerable:!0,get:function(){return d.CryptoPSBT}});const T=on();Object.defineProperty(e,"CryptoAccount",{enumerable:!0,get:function(){return T.CryptoAccount}});const g=sn();Object.defineProperty(e,"URRegistryDecoder",{enumerable:!0,get:function(){return g.URRegistryDecoder}});const _=Ne;Object.defineProperty(e,"MultiKey",{enumerable:!0,get:function(){return _.MultiKey}});const h=wt;Object.defineProperty(e,"ScriptExpressions",{enumerable:!0,get:function(){return h.ScriptExpressions}});const y=Me;Object.defineProperty(e,"PathComponent",{enumerable:!0,get:function(){return y.PathComponent}});const C=q,R=k,S=$;var D=$;Object.defineProperty(e,"DataItem",{enumerable:!0,get:function(){return D.DataItem}});const O=Be,w=rt;Object.defineProperty(e,"CryptoMultiAccounts",{enumerable:!0,get:function(){return w.CryptoMultiAccounts}});const M={URRegistryDecoder:g.URRegistryDecoder,Bytes:c.Bytes,CryptoAccount:T.CryptoAccount,CryptoHDKey:n.CryptoHDKey,CryptoMultiAccounts:w.CryptoMultiAccounts,CryptoKeypath:i.CryptoKeypath,CryptoCoinInfo:o.CryptoCoinInfo,CryptoCoinInfoType:o.Type,CryptoCoinInfoNetwork:o.Network,CryptoECKey:a.CryptoECKey,CryptoOutput:l.CryptoOutput,CryptoPSBT:d.CryptoPSBT,MultiKey:_.MultiKey,ScriptExpressions:h.ScriptExpressions,PathComponent:y.PathComponent},B={addReader:S.addReader,addSemanticDecode:S.addSemanticDecode,addSemanticEncode:S.addSemanticEncode,addWriter:S.addWriter,patchTags:O.patchTags},f={RegistryTypes:R.RegistryTypes,RegistryItem:C.RegistryItem,RegistryType:R.RegistryType,decodeToDataItem:S.decodeToDataItem,encodeDataItem:S.encodeDataItem,cbor:B};e.extend=f,(0,t.__exportStar)(st,e),(0,t.__exportStar)(sn(),e),(0,t.__exportStar)($,e),(0,t.__exportStar)(on(),e),(0,t.__exportStar)(et,e),(0,t.__exportStar)(pe,e),(0,t.__exportStar)(rt,e),(0,t.__exportStar)(Ti,e),(0,t.__exportStar)(ft,e),(0,t.__exportStar)(wr,e),(0,t.__exportStar)(Je,e),(0,t.__exportStar)(Ct,e),(0,t.__exportStar)(Re,e),(0,t.__exportStar)(Ne,e),(0,t.__exportStar)(Ce,e),(0,t.__exportStar)(jn,e),(0,t.__exportStar)(Me,e),(0,t.__exportStar)(q,e),(0,t.__exportStar)(k,e),(0,t.__exportStar)(Ri,e),(0,t.__exportStar)(Be,e),e.default=M}(Yt)),Yt}const Si=ln(Ro);(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Ut(),r=Si;const n={TRON_SIGN_REQUEST:new t.RegistryType("ton-sign-request",7201),TRON_SIGNATURE:new t.RegistryType("ton-signature",7202)},{decodeToDataItem:i,RegistryTypes:o}=t.extend;var a,c;(function(h){h[h.requestId=1]="requestId",h[h.signData=2]="signData",h[h.dataType=3]="dataType",h[h.derivationPath=4]="derivationPath",h[h.address=5]="address",h[h.origin=6]="origin"})(a||(a={})),(c=e.DataType||(e.DataType={}))[c.TRANSACTION=1]="TRANSACTION",c[c.SIGN_PROOF=2]="SIGN_PROOF";class l extends t.RegistryItem{constructor(y){super(),this.getRegistryType=()=>n.TRON_SIGN_REQUEST,this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDerivationPath=()=>this.derivationPath?this.derivationPath.getPath():void 0,this.getAddress=()=>this.address,this.getOrigin=()=>this.origin,this.getDataType=()=>this.dataType,this.toDataItem=()=>{const C={};if(C[a.signData]=this.signData,C[a.dataType]=this.dataType,this.derivationPath){const R=this.derivationPath.toDataItem();R.setTag(this.derivationPath.getRegistryType().getTag()),C[a.derivationPath]=R}return this.requestId&&(C[a.requestId]=new t.DataItem(this.requestId,o.UUID.getTag())),this.address&&(C[a.address]=this.address),this.origin&&(C[a.origin]=this.origin),new t.DataItem(C)},this.requestId=y.requestId,this.signData=y.signData,this.derivationPath=y.derivationPath,this.address=y.address,this.origin=y.origin,this.dataType=y.dataType}static parsePath(y,C){const R=y.replace(/[m|M]\//,"").split("/").map(S=>{const D=parseInt(S.replace("'",""));let O=!1;return S.endsWith("'")&&(O=!0),new t.PathComponent({index:D,hardened:O})});return new t.CryptoKeypath(R,Buffer.from(C,"hex"))}static constructTonRequest(y,C,R,S,D,O,w){return new l({requestId:S?Buffer.from(r.parse(S)):void 0,signData:y,dataType:C,derivationPath:w&&O?l.parsePath(w,O):void 0,address:R,origin:D})}}l.fromDataItem=h=>{const y=h.getData(),C=y[a.requestId]?y[a.requestId].getData():void 0,R=y[a.derivationPath]?t.CryptoKeypath.fromDataItem(y[a.derivationPath]):void 0;return new l({requestId:C,signData:y[a.signData],dataType:y[a.dataType],derivationPath:R,address:y[a.address],origin:y[a.origin]})},l.fromCBOR=h=>{const y=i(h);return l.fromDataItem(y)};const{RegistryTypes:d,decodeToDataItem:T}=t.extend;var g;(function(h){h[h.requestId=1]="requestId",h[h.signature=2]="signature",h[h.origin=3]="origin"})(g||(g={}));class _ extends t.RegistryItem{constructor(y,C,R){super(),this.getRegistryType=()=>n.TRON_SIGNATURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const S={};return this.requestId&&(S[g.requestId]=new t.DataItem(this.requestId,d.UUID.getTag())),this.origin&&(S[g.origin]=this.origin),S[g.signature]=this.signature,new t.DataItem(S)},this.signature=y,this.requestId=C,this.origin=R}}_.fromDataItem=h=>{const y=h.getData(),C=y[g.signature];let R,S;return y[g.requestId]&&(R=y[g.requestId].getData()),y[g.origin]&&(S=y[g.origin]),new _(C,R,S)},_.fromCBOR=h=>{const y=T(h);return _.fromDataItem(y)},t.patchTags(Object.values(n).filter(h=>!!h.getTag()).map(h=>h.getTag())),Object.keys(t).forEach(function(h){h!=="default"&&Object.defineProperty(e,h,{enumerable:!0,get:function(){return t[h]}})}),e.TonSignRequest=l,e.TonSignature=_})(gn);yn.exports=gn;var Xs=yn.exports,Ei={},wi={},ut={};Object.defineProperty(ut,"__esModule",{value:!0});ut.getCoinSymbol=void 0;function $s(e){var t;return(t={0:"BTC",2:"LTC",3:"DOGE",4:"RDD",5:"DASH",6:"PPC",7:"NMC",8:"FTC",9:"XCP",10:"BLK",11:"NSR",12:"NBT",13:"MZC",14:"VIA",15:"XCH",16:"RBY",17:"GRS",18:"DGC",19:"CCN",20:"DGB",22:"MONA",23:"CLAM",24:"XPM",25:"NEOS",26:"JBS",27:"ZRC",28:"VTC",29:"NXT",30:"BURST",31:"MUE",32:"ZOOM",33:"VASH",34:"CDN",35:"SDC",36:"PKB",37:"PND",38:"START",39:"MOIN",40:"EXP",41:"EMC2",42:"DCR",43:"XEM",44:"PART",45:"ARG",48:"SHR",49:"GCR",50:"NVC",51:"AC",52:"BTCD",53:"DOPE",54:"TPC",55:"AIB",56:"EDRC",57:"SYS",58:"SLR",59:"SMLY",60:"ETH",61:"ETC",62:"PSB",63:"LDCN",65:"XBC",66:"IOP",67:"NXS",68:"INSN",69:"OK",70:"BRIT",71:"CMP",72:"CRW",73:"BELA",74:"ICX",75:"FJC",76:"MIX",77:"XVG",78:"EFL",79:"CLUB",80:"RICHX",81:"POT",82:"QRK",83:"TRC",84:"GRC",85:"AUR",86:"IXC",87:"NLG",88:"BITB",89:"BTA",90:"XMY",91:"BSD",92:"UNO",93:"MTR",94:"GB",95:"SHM",96:"CRX",97:"BIQ",98:"EVO",99:"STO",100:"BIGUP",101:"GAME",102:"DLC",103:"ZYD",104:"DBIC",105:"STRAT",106:"SH",107:"MARS",108:"UBQ",109:"PTC",110:"NRO",111:"ARK",112:"USC",113:"THC",114:"LINX",115:"ECN",116:"DNR",117:"PINK",118:"ATOM",119:"PIVX",120:"FLASH",121:"ZEN",122:"PUT",123:"ZNY",124:"UNIFY",125:"XST",126:"BRK",127:"VC",128:"XMR",129:"VOX",130:"NAV",131:"FCT",132:"EC",133:"ZEC",134:"LSK",135:"STEEM",136:"XZC",137:"RBTC",139:"RPT",140:"LBC",141:"KMD",142:"BSQ",143:"RIC",144:"XRP",145:"BCH",146:"NEBL",147:"ZCL",148:"XLM",149:"NLC2",150:"WHL",151:"ERC",152:"DMD",153:"BTM",154:"BIO",155:"XWCC",156:"BTG",157:"BTC2X",158:"SSN",159:"TOA",160:"BTX",161:"ACC",162:"BCO",163:"ELLA",164:"PIRL",165:"XNO",166:"VIVO",167:"FRST",168:"HNC",169:"BUZZ",170:"MBRS",171:"HC",172:"HTML",173:"ODN",174:"ONX",175:"RVN",176:"GBX",177:"BTCZ",178:"POA",179:"NYC",180:"MXT",181:"WC",182:"MNX",183:"BTCP",184:"MUSIC",185:"BCA",186:"CRAVE",187:"STAK",188:"WBTC",189:"LCH",190:"EXCL",192:"LCC",193:"XFE",194:"EOS",195:"TRX",196:"KOBO",197:"HUSH",198:"BAN",199:"ETF",200:"OMNI",201:"BIFI",202:"UFO",203:"CNMC",204:"BCN",205:"RIN",206:"ATP",207:"EVT",208:"ATN",209:"BIS",210:"NEET",211:"BOPO",212:"OOT",213:"ALIAS",214:"MONK",215:"BOXY",216:"FLO",217:"MEC",218:"BTDX",219:"XAX",220:"ANON",221:"LTZ",222:"BITG",223:"ICP",224:"SMART",225:"XUEZ",226:"HLM",227:"WEB",228:"ACM",229:"NOS",230:"BITC",231:"HTH",232:"TZC",233:"VAR",234:"IOV",235:"FIO",236:"BSV",237:"DXN",238:"QRL",239:"PCX",240:"LOKI",242:"NIM",243:"SOV",244:"JCT",245:"SLP",246:"EWT",247:"UC",248:"EXOS",249:"ECA",250:"SOOM",251:"XRD",252:"FREE",253:"NPW",254:"BST",256:"NANO",257:"BTCC",259:"ZEST",260:"ABT",261:"PION",262:"DT3",263:"ZBUX",264:"KPL",265:"TPAY",266:"ZILLA",267:"ANK",268:"BCC",269:"HPB",270:"ONE",271:"SBC",272:"IPC",273:"DMTC",274:"OGC",275:"SHIT",276:"ANDES",277:"AREPA",278:"BOLI",279:"RIL",280:"HTR",281:"FCTID",282:"BRAVO",283:"ALGO",284:"BZX",285:"GXX",286:"HEAT",287:"XDN",288:"FSN",289:"CPC",290:"BOLD",291:"IOST",292:"TKEY",293:"USE",294:"BCZ",295:"IOC",296:"ASF",297:"MASS",298:"FAIR",299:"NUKO",300:"GNX",301:"DIVI",302:"CMT",303:"EUNO",304:"IOTX",305:"ONION",306:"8BIT",307:"ATC",308:"BTS",309:"CKB",310:"UGAS",311:"ADS",312:"ARA",313:"ZIL",314:"MOAC",315:"SWTC",316:"VNSC",317:"PLUG",318:"MAN",319:"ECC",320:"RPD",321:"RAP",322:"GARD",323:"ZER",324:"EBST",325:"SHARD",326:"MRX",327:"CMM",328:"BLOCK",329:"AUDAX",330:"LUNA",331:"ZPM",332:"KUVA",333:"MEM",334:"CS",335:"SWIFT",336:"FIX",337:"CPC",338:"VGO",339:"DVT",340:"N8V",341:"MTNS",342:"BLAST",343:"DCT",344:"AUX",345:"USDP",346:"HTDF",347:"YEC",348:"QLC",349:"TEA",350:"ARW",351:"MDM",352:"CYB",353:"LTO",354:"DOT",355:"AEON",356:"RES",357:"AYA",358:"DAPS",359:"CSC",360:"VSYS",361:"NOLLAR",362:"XNOS",363:"CPU",364:"LAMB",365:"VCT",366:"CZR",367:"ABBC",368:"HET",369:"XAS",370:"VDL",371:"MED",372:"ZVC",373:"VESTX",374:"DBT",375:"SEOS",376:"MXW",377:"ZNZ",378:"XCX",379:"SOX",380:"NYZO",381:"ULC",382:"RYO",383:"KAL",384:"XSN",385:"DOGEC",386:"BMV",387:"QBC",388:"IMG",389:"QOS",390:"PKT",391:"LHD",392:"CENNZ",393:"HSN",394:"CRO",395:"UMBRU",396:"EVER",397:"NEAR",398:"XPC",399:"ZOC",400:"NIX",401:"UC",402:"GALI",403:"OLT",404:"XBI",405:"DONU",406:"EARTHS",407:"HDD",408:"SUGAR",409:"AILE",410:"TENT",411:"TAN",412:"AIN",413:"MSR",414:"SUMO",415:"ETN",416:"BYTZ",417:"WOW",418:"XTNC",419:"LTHN",420:"NODE",421:"AGM",422:"CCX",423:"TNET",424:"TELOS",425:"AION",426:"BC",427:"KTV",428:"ZCR",429:"ERG",430:"PESO",431:"BTC2",432:"XRPHD",433:"WE",434:"KSM",435:"PCN",436:"NCH",437:"ICU",438:"LN",439:"DTP",440:"BTCR",441:"AERGO",442:"XTH",443:"LV",444:"PHR",445:"VITAE",446:"COCOS",447:"DIN",448:"SPL",449:"YCE",450:"XLR",451:"KTS",452:"DGLD",453:"XNS",454:"EM",455:"SHN",456:"SEELE",457:"AE",458:"ODX",459:"KAVA",460:"GLEEC",461:"FIL",462:"RUTA",463:"CSDT",464:"ETI",465:"ZSLP",466:"ERE",467:"DX",468:"CPS",469:"BTH",470:"MESG",471:"FIMK",472:"AR",473:"OGO",474:"ROSE",475:"BARE",476:"GLEEC",477:"CLR",478:"RNG",479:"OLO",480:"PEXA",481:"MOON",482:"OCEAN",483:"BNT",484:"AMO",485:"FCH",486:"LAT",487:"COIN",488:"VEO",489:"CCA",490:"GFN",491:"BIP",492:"KPG",493:"FIN",494:"BAND",495:"DROP",496:"BHT",497:"LYRA",498:"CS",499:"RUPX",500:"THETA",501:"SOL",502:"THT",503:"CFX",504:"KUMA",505:"HASH",506:"CSPR",507:"EARTH",508:"EGLD",509:"CHI",510:"KOTO",511:"OTC",512:"XRD",513:"SEELEN",514:"AETH",515:"DNA",516:"VEE",517:"SIERRA",518:"LET",519:"BSC",520:"BTCV",521:"ABA",522:"SCC",523:"EDG",524:"AMS",525:"GOSS",526:"BU",527:"GRAM",528:"YAP",529:"SCRT",530:"NOVO",531:"GHOST",532:"HST",533:"PRJ",534:"YOU",535:"XHV",536:"BYND",537:"JOYS",538:"VAL",539:"FLOW",540:"SMESH",541:"SCDO",542:"IQS",543:"BIND",544:"COINEVO",545:"SCRIBE",546:"HYN",547:"BHP",548:"BBC",549:"MKF",550:"XDC",551:"STR",552:"SUM",553:"HBC",555:"BCS",556:"KTS",557:"LKR",558:"TAO",559:"XWC",560:"DEAL",561:"NTY",562:"TOP",564:"AG",565:"CICO",566:"IRIS",567:"NCG",568:"LRG",569:"SERO",570:"BDX",571:"CCXX",572:"SLS",573:"SRM",575:"VIVT",576:"BPS",577:"NKN",578:"ICL",579:"BONO",580:"PLC",581:"DUN",582:"DMCH",583:"CTC",584:"KELP",585:"GBCR",586:"XDAG",587:"PRV",588:"SCAP",589:"TFUEL",590:"GTM",591:"RNL",592:"GRIN",593:"MWC",594:"DOCK",595:"POLYX",596:"DIVER",597:"XEP",598:"APN",599:"TFC",600:"UTE",601:"MTC",602:"NC",603:"XINY",604:"DYN",605:"BUFS",606:"STOS",607:"TON",608:"TAFT",609:"HYDRA",610:"NOR",613:"WCN",614:"OPT",615:"PSWAP",616:"VAL",617:"XOR",618:"SSP",619:"DEI",621:"ZERO",622:"ALPHA",623:"BDECO",624:"NOBL",625:"EAST",626:"KDA",627:"SOUL",628:"LORE",629:"FNR",630:"NEXUS",631:"QTZ",632:"XMA",633:"CALL",634:"VAL",635:"POKT",636:"EMIT",637:"APTOS",638:"ADON",639:"BTSG",640:"LFC",641:"KCS",642:"KCC",643:"AZERO",644:"TREE",645:"LX",646:"XLN",647:"CIC",648:"ZRB",650:"UCO",651:"SFX",652:"SFT",653:"WSFX",654:"USDG",655:"WMP",659:"KOIN",660:"PIRATE",663:"SFRX",666:"ACT",667:"PRKL",668:"SSC",669:"GC",670:"PLGR",671:"MPLGR",672:"KNOX",673:"ZED",674:"CNDL",675:"WLKR",676:"WLKRR",677:"YUNGE",678:"Voken",679:"APL",680:"Evrynet",681:"NENG",682:"CHTA",685:"OAS",686:"KAR",688:"CET",690:"KLV",694:"VTBC",698:"VEIL",699:"GTB",700:"XDAI",701:"COM",702:"CCC",707:"MCOIN",711:"CHC",712:"SERF",713:"XTL",714:"BNB",715:"SIN",716:"DLN",717:"BONTE",718:"PEER",725:"MCX",730:"HEALIOS",731:"BMK",734:"DENTX",737:"ATOP",747:"CFG",750:"XPRT",757:"HONEY",768:"BALLZ",770:"COSA",771:"BR",775:"PLSR",776:"KEY",777:"BTW",780:"PLCUC",781:"PLCUX",782:"PLCU",784:"SUI",786:"UIDD",787:"ACA",788:"BNC",789:"TAU",799:"PDEX",800:"BEET",801:"DST",804:"ZKS",808:"QVT",809:"SDN",810:"ASTR",813:"MEER",818:"VET",819:"REEF",820:"CLO",822:"BDB",827:"ACE",828:"CCN",831:"CRUZ",832:"SAPP",833:"777",834:"KYAN",835:"AZR",836:"CFL",837:"DASHD",838:"TRTT",839:"UCR",840:"PNY",841:"BECN",842:"MONK",843:"SAGA",844:"SUV",845:"ESK",846:"OWO",847:"PEPS",848:"BIR",849:"MOBIC",850:"FLS",852:"DSM",853:"PRCY",858:"HVH",866:"MOB",868:"IF",877:"NAM",880:"LUM",883:"ZBC",886:"ADF",888:"NEO",889:"TOMO",890:"XSEL",896:"LKSC",898:"AS",899:"XEC",900:"LMO",901:"NXT",904:"HNT",907:"FIS",909:"SGE",911:"GERT",916:"META",917:"FRA",919:"CCD",921:"AVN",925:"DIP",928:"GHM",931:"RUNE",945:"UNLOCK",955:"LTP",960:"VKAX",966:"MATIC",968:"UNW",970:"TWINS",977:"TLOS",981:"TAFECO",985:"AU",987:"VCG",988:"XAZAB",989:"AIOZ",990:"CORE",991:"PEC",992:"UNT",993:"XRB",994:"QUAI",995:"CAPS",996:"OKT",997:"SUM",998:"LBTC",999:"BCD",1e3:"BTN",1001:"TT",1002:"BKT",1003:"NODL",1004:"PCOIN",1005:"TAO",1006:"HSK",1007:"FTM",1008:"RPG",1010:"HT",1011:"ELV",1013:"BIC",1020:"EVC",1022:"XRD",1023:"ONE",1024:"ONT",1025:"CZZ",1026:"KEX",1027:"MCM",1032:"BTCR",1042:"MFID",1111:"BBC",1120:"RISE",1122:"CMT",1128:"ETSC",1129:"DFI",1130:"DFI",1137:"$DAG",1145:"CDY",1155:"EFI",1170:"HOO",1234:"ALPH",1284:"GLMR",1285:"MOVR",1298:"WPC",1308:"WEI",1337:"DFC",1397:"HYC",1410:"TENTSLP",1510:"XSC",1512:"AAC",1533:"BEAM",1555:"APC",1616:"ELF",1618:"AUDL",1620:"ATH",1627:"LUME",1642:"NEW",1657:"BTA",1668:"NEOX",1669:"MEWC",1688:"BCX",1729:"XTZ",1776:"LBTC",1777:"BBP",1784:"JPYS",1789:"VEGA",1815:"ADA",1818:"CUBE",1856:"TES",1888:"ZTX",1899:"XEC",1901:"CLC",1919:"VIPS",1926:"CITY",1955:"XX",1977:"XMX",1984:"TRTL",1985:"SLRT",1986:"QTH",1987:"EGEM",1988:"MIRA",1989:"HODL",1990:"PHL",1991:"SC",1996:"MYT",1997:"POLIS",1998:"XMCC",1999:"COLX",2e3:"GIN",2001:"MNP",2002:"MLN",2017:"KIN",2018:"EOSC",2019:"GBT",2020:"PKC",2021:"SKT",2022:"XHT",2048:"MCASH",2049:"TRUE",2086:"KILT",2109:"SAMA",2112:"IoTE",2137:"XRG",2182:"CHZ",2221:"ASK",2301:"QTUM",2302:"ETP",2303:"GXC",2304:"CRP",2305:"ELA",2338:"SNOW",2365:"XIN",2570:"AOA",2718:"NAS",2894:"REOSC",2941:"BND",3003:"LUX",3030:"HBAR",3077:"COS",3276:"CCC",3333:"SXP",3377:"ROI",3381:"DYN",3383:"SEQ",3552:"DEO",3564:"DST",3601:"CY",4040:"FC8",4096:"YEE",4218:"IOTA",4219:"SMR",4242:"AXE",4343:"XYM",4444:"C4E",4919:"XVM",5006:"SBC",5248:"FIC",5353:"HNS",5404:"ISK",5467:"ALTME",5555:"FUND",5757:"STX",5895:"VOW",5920:"SLU",6060:"GO",6174:"MOI",6599:"RSC",6666:"BPA",6688:"SAFE",6779:"COTI",6969:"ROGER",7091:"TOPL",7331:"KLY",7341:"SHFT",7777:"BTV",8e3:"SKY",8192:"PAC",8217:"KLAY",8339:"BTQ",8444:"XCH",8680:"PLMNT",8888:"SBTC",8964:"NULS",8997:"BBC",8998:"JGC",8999:"BTP",9e3:"AVAX",9001:"ARB1",9002:"BOBA",9003:"LOOP",9004:"STRK",9005:"AVAXC",9006:"BSC",9797:"NRG",9888:"BTF",9999:"GOD",1e4:"FO",10226:"RTM",10291:"XRC",10605:"XPI",11111:"ESS",12345:"IPOS",12586:"MINA",13107:"BTY",13108:"YCC",14001:"WAX",15845:"SDGO",16181:"XTX",16754:"ARDR",18e3:"MTR",19165:"SAFE",19167:"FLUX",19169:"RITO",20036:"XND",21004:"C4EI",21888:"PCT",22504:"PWR",25252:"BELL",25718:"CHX",29223:"NEXA",31102:"ESN",33416:"TEO",33878:"BTCS",34952:"BTT",37992:"FXTC",39321:"AMA",42069:"FACT",43028:"AXIV",49262:"EVE",49344:"STASH",52752:"CELO",61616:"TH",65536:"KETH",69420:"GRLC",70007:"GWL",77777:"ZYN",88888:"RYO",99999:"WICC",100500:"HOME",101010:"STC",105105:"STRAX",111111:"KAS",161803:"APTA",200625:"AKA",200665:"GENOM",246529:"ATS",261131:"ZAMA",314159:"PI",333332:"VALUE",333333:"3333",424242:"X42",534352:"SCR",666666:"VITE",888888:"SEA",1048576:"AMAX",1171337:"ILT",1313114:"ETHO",1313500:"XERO",1712144:"LAX",3924011:"EPK",4741444:"HYD",5249353:"BCO",5249354:"BHD",5264462:"PTN",5655640:"VLX",5718350:"WAN",5741564:"WAVES",5741565:"WEST",6382179:"ABC",6517357:"CRM",7562605:"SEM",7567736:"ION",7777777:"FCT",7825266:"WGR",7825267:"OBSR",8163271:"AFS",15118976:"XDS",61717561:"AQUA",88888888:"HATCH",91927009:"kUSD",99999996:"GENS",99999997:"EQ",99999998:"FLUID",99999999:"QKC",608589380:"FVDC"}[e])!==null&&t!==void 0?t:""}ut.getCoinSymbol=$s;(function(e){var t=X&&X.__createBinding||(Object.create?function(g,_,h,y){y===void 0&&(y=h);var C=Object.getOwnPropertyDescriptor(_,h);(!C||("get"in C?!_.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return _[h]}}),Object.defineProperty(g,y,C)}:function(g,_,h,y){y===void 0&&(y=h),g[y]=_[h]}),r=X&&X.__setModuleDefault||(Object.create?function(g,_){Object.defineProperty(g,"default",{enumerable:!0,value:_})}:function(g,_){g.default=_}),n=X&&X.__importStar||function(g){if(g&&g.__esModule)return g;var _={};if(g!=null)for(var h in g)h!=="default"&&Object.prototype.hasOwnProperty.call(g,h)&&t(_,g,h);return r(_,g),_},i=X&&X.__exportStar||function(g,_){for(var h in g)h!=="default"&&!Object.prototype.hasOwnProperty.call(_,h)&&t(_,g,h)};Object.defineProperty(e,"__esModule",{value:!0}),e.parsePath=e.uuidStringify=e.uuidParse=e.toBuffer=e.toHex=e.uuid=void 0;const o=n(Si);e.uuid=o,i(ut,e);function a(g){return g===void 0?"":Buffer.from(g).toString("hex")}e.toHex=a;function c(g){return Buffer.from(g??"","hex")}e.toBuffer=c;function l(g){return Buffer.from(o.parse(g))}e.uuidParse=l;function d(g){return o.stringify(g)}e.uuidStringify=d;function T(g){return g.replace(/^m\//i,"").split("/").map(h=>{const y=h.endsWith("'");return{index:Number(y?h.substring(0,h.length-1):h),hardened:y}})}e.parsePath=T})(wi);var xt={};Object.defineProperty(xt,"__esModule",{value:!0});xt.pathToKeypath=void 0;const un=Ut(),qs=e=>{const r=e.replace(/[m|M]\//,"").split("/").map(n=>{const i=parseInt(n.replace("'",""),10),o=n.endsWith("'");return new un.PathComponent({index:i,hardened:o})});return new un.CryptoKeypath(r)};xt.pathToKeypath=qs;(function(e){var t=X&&X.__createBinding||(Object.create?function(n,i,o,a){a===void 0&&(a=o);var c=Object.getOwnPropertyDescriptor(i,o);(!c||("get"in c?!i.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(n,a,c)}:function(n,i,o,a){a===void 0&&(a=o),n[a]=i[o]}),r=X&&X.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&t(i,n,o)};Object.defineProperty(e,"__esModule",{value:!0}),r(wi,e),r(xt,e),r(ut,e)})(Ei);var Oi={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.URType=e.UR=void 0;var t=se;Object.defineProperty(e,"UR",{enumerable:!0,get:function(){return t.UR}}),function(r){r.CryptoPSBT="crypto-psbt",r.CryptoMultiAccounts="crypto-multi-accounts",r.CryptoHDKey="crypto-hdkey",r.CryptoAccount="crypto-account",r.BtcSignature="btc-signature",r.ArweaveCryptoAccount="arweave-crypto-account",r.EthSignature="eth-signature",r.SolSignature="sol-signature",r.StellarSignature="stellar-signature",r.CosmosSignature="cosmos-signature",r.EvmSignature="evm-signature",r.AptosSignature="aptos-signature",r.CardanoSignature="cardano-signature",r.TronSignature="keystone-sign-result",r.KeystoneSignResult="keystone-sign-result",r.NearSignature="near-signature",r.ArweaveSignature="arweave-signature",r.SuiSignature="sui-signature",r.XrpAccount="bytes",r.XrpSignRequest="bytes",r.XrpSignature="bytes",r.TonSignature="ton-signature"}(e.URType||(e.URType={}))})(Oi);Object.defineProperty(mr,"__esModule",{value:!0});var Ii=mr.KeystoneTonSDK=void 0;const yr=Xs,sr=Ei,Ws=Oi;let Di=class{constructor(t){this.config=t}parseSignature(t){if(t.type!==Ws.URType.TonSignature)throw new Error("type not match");const r=yr.TonSignature.fromCBOR(t.cbor),n=r.getRequestId();return{requestId:Buffer.isBuffer(n)?(0,sr.uuidStringify)(n):"",signature:(0,sr.toHex)(r.getSignature()),origin:r.getOrigin()}}generateSignRequest({requestId:t,signData:r,dataType:n,xfp:i,derivationPath:o,address:a}){var c;return yr.TonSignRequest.constructTonRequest((0,sr.toBuffer)(r),n,a,t,(c=this.config)===null||c===void 0?void 0:c.origin,i,o).toUR()}};Di.DataType=yr.DataType;Ii=mr.KeystoneTonSDK=Di;var Or={},Ai={exports:{}},Bi={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=ki(),r=Xi;const n={TRON_SIGN_REQUEST:new t.RegistryType("ton-sign-request",7201),TRON_SIGNATURE:new t.RegistryType("ton-signature",7202)},{decodeToDataItem:i,RegistryTypes:o}=t.extend;var a,c;(function(h){h[h.requestId=1]="requestId",h[h.signData=2]="signData",h[h.dataType=3]="dataType",h[h.derivationPath=4]="derivationPath",h[h.address=5]="address",h[h.origin=6]="origin"})(a||(a={})),(c=e.DataType||(e.DataType={}))[c.TRANSACTION=1]="TRANSACTION",c[c.SIGN_PROOF=2]="SIGN_PROOF";class l extends t.RegistryItem{constructor(y){super(),this.getRegistryType=()=>n.TRON_SIGN_REQUEST,this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDerivationPath=()=>this.derivationPath?this.derivationPath.getPath():void 0,this.getAddress=()=>this.address,this.getOrigin=()=>this.origin,this.getDataType=()=>this.dataType,this.toDataItem=()=>{const C={};if(C[a.signData]=this.signData,C[a.dataType]=this.dataType,this.derivationPath){const R=this.derivationPath.toDataItem();R.setTag(this.derivationPath.getRegistryType().getTag()),C[a.derivationPath]=R}return this.requestId&&(C[a.requestId]=new t.DataItem(this.requestId,o.UUID.getTag())),this.address&&(C[a.address]=this.address),this.origin&&(C[a.origin]=this.origin),new t.DataItem(C)},this.requestId=y.requestId,this.signData=y.signData,this.derivationPath=y.derivationPath,this.address=y.address,this.origin=y.origin,this.dataType=y.dataType}static parsePath(y,C){const R=y.replace(/[m|M]\//,"").split("/").map(S=>{const D=parseInt(S.replace("'",""));let O=!1;return S.endsWith("'")&&(O=!0),new t.PathComponent({index:D,hardened:O})});return new t.CryptoKeypath(R,Buffer.from(C,"hex"))}static constructTonRequest(y,C,R,S,D,O,w){return new l({requestId:S?Buffer.from(r.parse(S)):void 0,signData:y,dataType:C,derivationPath:w&&O?l.parsePath(w,O):void 0,address:R,origin:D})}}l.fromDataItem=h=>{const y=h.getData(),C=y[a.requestId]?y[a.requestId].getData():void 0,R=y[a.derivationPath]?t.CryptoKeypath.fromDataItem(y[a.derivationPath]):void 0;return new l({requestId:C,signData:y[a.signData],dataType:y[a.dataType],derivationPath:R,address:y[a.address],origin:y[a.origin]})},l.fromCBOR=h=>{const y=i(h);return l.fromDataItem(y)};const{RegistryTypes:d,decodeToDataItem:T}=t.extend;var g;(function(h){h[h.requestId=1]="requestId",h[h.signature=2]="signature",h[h.origin=3]="origin"})(g||(g={}));class _ extends t.RegistryItem{constructor(y,C,R){super(),this.getRegistryType=()=>n.TRON_SIGNATURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const S={};return this.requestId&&(S[g.requestId]=new t.DataItem(this.requestId,d.UUID.getTag())),this.origin&&(S[g.origin]=this.origin),S[g.signature]=this.signature,new t.DataItem(S)},this.signature=y,this.requestId=C,this.origin=R}}_.fromDataItem=h=>{const y=h.getData(),C=y[g.signature];let R,S;return y[g.requestId]&&(R=y[g.requestId].getData()),y[g.origin]&&(S=y[g.origin]),new _(C,R,S)},_.fromCBOR=h=>{const y=T(h);return _.fromDataItem(y)},t.patchTags(Object.values(n).filter(h=>!!h.getTag()).map(h=>h.getTag())),Object.keys(t).forEach(function(h){h!=="default"&&Object.defineProperty(e,h,{enumerable:!0,get:function(){return t[h]}})}),e.TonSignRequest=l,e.TonSignature=_})(Bi);Ai.exports=Bi;var Gs=Ai.exports;Object.defineProperty(Or,"__esModule",{value:!0});var Pi=Or.KeystoneTonSDK=void 0;const gr=Gs,fr=$i,Ys=qi;class Mi{constructor(t){this.config=t}parseSignature(t){if(t.type!==Ys.URType.TonSignature)throw new Error("type not match");const r=gr.TonSignature.fromCBOR(t.cbor),n=r.getRequestId();return{requestId:Buffer.isBuffer(n)?(0,fr.uuidStringify)(n):"",signature:(0,fr.toHex)(r.getSignature()),origin:r.getOrigin()}}generateSignRequest({requestId:t,signData:r,dataType:n,xfp:i,derivationPath:o,address:a}){var c;return gr.TonSignRequest.constructTonRequest((0,fr.toBuffer)(r),n,a,t,(c=this.config)===null||c===void 0?void 0:c.origin,i,o).toUR()}}Mi.DataType=gr.DataType;Pi=Or.KeystoneTonSDK=Mi;const Vs=(e,t,r,n)=>new Pi({origin:"TonKeeper"}).generateSignRequest({signData:e.toString("hex"),dataType:t==="transaction"?1:2,address:r,xfp:n==null?void 0:n.mfp,derivationPath:n==null?void 0:n.path}),Zs=({sdk:e,transactionParams:t,onClose:r,handleResult:n})=>{const i=Wi(),{t:o}=Gi(),{extension:a}=Yi();io(e,r);const c=ue.useCallback(T=>{const g=new Ii().parseSignature(T);n(g.signature)},[]),l=Vi(null,c),d=ue.useMemo(()=>Vs(t.message,t.messageType,Zi(i.rawAddress),t.pathInfo),[t]);return me.jsxs(Qi,{onSubmit:T=>{T.preventDefault(),T.stopPropagation(),l()},children:[me.jsx(zi,{title:o("keystone_sign_title"),description:o("keystone_sign_subtitle")}),me.jsx(Ji,{extension:a,margin:!0,children:me.jsx(eo,{data:d})}),me.jsx(to,{primary:!0,size:"large",fullWidth:!0,type:"submit",children:o("signer_scan_result")})]})},tf=()=>{const e=ro(),[t,r]=ue.useState(void 0),[n,i]=ue.useState(void 0),o=ue.useCallback(()=>{r(void 0),i(void 0)},[]),a=ue.useCallback(d=>{e.uiEvents.emit("response",{method:"response",id:n,params:d}),o()},[e,n,o]),c=ue.useCallback(()=>{n&&e.uiEvents.emit("response",{method:"response",id:n,params:new Error("Cancel auth request")}),o()},[n,e,o]);ue.useEffect(()=>{const d=T=>{r(T.params),i(T.id)};return e.uiEvents.on("keystone",d),()=>{e.uiEvents.off("keystone",d)}},[e]);const l=ue.useCallback(()=>{if(!(!t||!n))return me.jsx(Zs,{sdk:e,transactionParams:t,onClose:c,handleResult:a})},[e,t,n,c,a]);return me.jsx(no,{isOpen:t!=null&&n!=null,handleClose:c,children:l})};export{Zs as SignerContent,tf as default};
