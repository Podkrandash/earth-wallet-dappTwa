import{r as N,aE as B,j as t,aF as l,u as T,aG as w,a8 as b,a9 as u,a2 as f,ay as y,aH as A,aI as k,aJ as m,aK as v,aL as D,e as x,aM as J,aN as j,aO as h,aP as g,aQ as I,aR as L,aS as F,aT as O,aU as p,aV as W,ah as R,a1 as M,a4 as U,aW as S,aX as q,aY as G,aZ as P,a_ as V,a$ as Y,b0 as $,b1 as Q,b2 as X,b3 as Z,b4 as z,b5 as K,b6 as tt,b7 as st,b8 as et,f as nt,b9 as at,ba as it,bb as rt,bc as ot,bd as ct,be as dt,bf as ut,bg as lt,bh as mt,bi as xt}from"./index-Ikj8v-B_.js";const Rt=(s,n,e,a,i)=>{N.useEffect(()=>{if(!s)return;const r=a?i==null?void 0:i.current:window;if(!r)return;const o=B(()=>{if(!n&&document.documentElement.className!=="is-locked")if(r===window)window.innerHeight+window.scrollY>=document.body.offsetHeight-500&&e();else{const c=r;c.scrollTop>=c.scrollHeight-window.innerHeight-500&&e()}},50);return r.addEventListener("scroll",o),o(),()=>{r.removeEventListener("scroll",o)}},[s,a,i])},jt=({tonTransfer:s,timestamp:n,event:e,isScam:a,status:i})=>{const r=F(),{data:o}=b(u.TON),{fiatAmount:c}=f(o,y(s.amount)),d=s.recipient.address===r.rawAddress?"received":"send";return t.jsxs(A,{event:e,children:[t.jsx(O,{isScam:a,amount:s.amount,symbol:u.TON,total:c,timestamp:n,kind:d,status:i}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[d==="received"&&t.jsx(g,{sender:s.sender}),d==="send"&&t.jsx(I,{recipient:s.recipient}),t.jsx(j,{eventId:e.eventId}),t.jsx(h,{extra:e.extra}),t.jsx(p,{comment:a?void 0:s.comment})]})]})},ft=({action:s,timestamp:n,event:e,isScam:a})=>{const{tonTransfer:i}=s;return i?t.jsx(jt,{tonTransfer:i,event:e,isScam:a,timestamp:n,status:s.status}):t.jsx(l,{event:e})},At=({action:s,timestamp:n,event:e})=>{const{t:a}=T(),{auctionBid:i}=s,r=w(),{data:o}=b(u.TON),{fiatAmount:c}=f(o,y((i==null?void 0:i.amount.value)??0));return i?t.jsxs(A,{event:e,children:[t.jsxs("div",{children:[t.jsx(k,{children:a("transaction_type_bid")}),t.jsxs(m,{children:[r(i.amount.value)," ",i.amount.tokenName]}),c&&t.jsxs(m,{children:["≈ ",c]}),t.jsx(v,{kind:"send",timestamp:n}),t.jsx(D,{status:s.status})]}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[t.jsx(J,{beneficiary:i.auction}),t.jsx(j,{eventId:e.eventId}),t.jsx(h,{extra:e.extra})]})]}):t.jsx(l,{event:e})},ht=({action:s,timestamp:n,event:e})=>{const{domainRenew:a}=s;return a?t.jsxs(A,{event:e,children:[t.jsxs("div",{children:[t.jsx(k,{children:a.domain}),t.jsx(v,{kind:"send",timestamp:n}),t.jsx(D,{status:s.status})]}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[t.jsx(g,{sender:a.renewer,bounced:!0}),t.jsx(j,{eventId:e.eventId}),t.jsx(h,{extra:e.extra})]})]}):t.jsx(l,{event:e})},bt=({action:s,timestamp:n,event:e})=>{const{smartContractExec:a}=s,i=w(),{data:r}=b(u.TON),{fiatAmount:o}=f(r,y((a==null?void 0:a.tonAttached)??0));return a?t.jsxs(A,{event:e,children:[t.jsxs("div",{children:[t.jsxs(k,{children:["- ",i(a.tonAttached)," ",u.TON]}),o&&t.jsxs(m,{children:["≈ ",o]}),t.jsx(v,{kind:"call",timestamp:n}),t.jsx(D,{status:s.status})]}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[t.jsx(I,{recipient:a.contract,bounced:!0}),t.jsx(j,{eventId:e.eventId}),t.jsx(h,{extra:e.extra}),t.jsx(L,{operation:a.operation})]})]}):t.jsx(l,{event:e})},yt=({extraCurrencyTransfer:s,timestamp:n,event:e,isScam:a,status:i})=>{const r=F(),{data:o}=b(s.currency.symbol),{fiatAmount:c}=f(o,y(s.amount,s.currency.decimals)),d=s.recipient.address===r.rawAddress?"received":"send";return t.jsxs(A,{event:e,children:[t.jsx(O,{isScam:a,amount:s.amount,decimals:s.currency.decimals,symbol:s.currency.symbol,total:c,timestamp:n,kind:d,status:i}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[d==="received"&&t.jsx(g,{sender:s.sender}),d==="send"&&t.jsx(I,{recipient:s.recipient}),t.jsx(j,{eventId:e.eventId}),t.jsx(h,{extra:e.extra}),t.jsx(p,{comment:a?void 0:s.comment})]})]})},St=({action:s,timestamp:n,event:e,isScam:a})=>{const{extraCurrencyTransfer:i}=s;return i?t.jsx(yt,{extraCurrencyTransfer:i,event:e,isScam:a,timestamp:n,status:s.status}):t.jsx(l,{event:e})},Tt=({depositStake:s,timestamp:n,event:e,status:a})=>{const{t:i}=T(),{data:r}=b(u.TON),o=w(),{fiatAmount:c}=f(r,y(s.amount));return t.jsxs(A,{event:e,children:[t.jsxs("div",{children:[t.jsx(k,{children:i("staking_deposit")}),t.jsxs(m,{children:["- ",o(s.amount)," ",u.TON]}),t.jsxs(m,{children:["≈ ",c]}),t.jsx(v,{kind:"send",timestamp:n}),t.jsx(D,{status:a})]}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[t.jsx(W,{pool:s.pool}),t.jsx(j,{eventId:e.eventId}),t.jsx(h,{extra:e.extra})]})]})},kt=({action:s,timestamp:n,event:e,isScam:a})=>{const{depositStake:i}=s;return i?t.jsx(Tt,{depositStake:i,timestamp:n,event:e,isScam:a,status:s.status}):t.jsx(l,{event:e})},vt=({withdrawStake:s,timestamp:n,event:e,status:a})=>{const{t:i}=T(),{data:r}=b(u.TON),o=w(),{fiatAmount:c}=f(r,y(s.amount));return t.jsxs(A,{event:e,children:[t.jsxs("div",{children:[t.jsx(k,{children:i("staking_withdraw")}),t.jsxs(m,{children:["+ ",o(s.amount)," ",u.TON]}),t.jsxs(m,{children:["≈ ",c]}),t.jsx(v,{kind:"send",timestamp:n}),t.jsx(D,{status:a})]}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[t.jsx(W,{pool:s.pool}),t.jsx(j,{eventId:e.eventId}),t.jsx(h,{extra:e.extra})]})]})},Dt=({action:s,timestamp:n,event:e,isScam:a})=>{const{withdrawStake:i}=s;return i?t.jsx(vt,{withdrawStake:i,timestamp:n,event:e,isScam:a,status:s.status}):t.jsx(l,{event:e})},wt=({withdrawStakeRequest:s,timestamp:n,event:e,status:a})=>{const{t:i}=T(),{data:r}=b(u.TON),o=w(),{fiatAmount:c}=f(r,y(s.amount??0));return t.jsxs(A,{event:e,children:[t.jsxs("div",{children:[t.jsx(k,{children:i("activityActionModal_withdrawal_request")}),s.amount&&t.jsxs(t.Fragment,{children:[t.jsxs(m,{children:["+ ",o(s.amount)," ",u.TON]}),t.jsxs(m,{children:["≈ ",c]})]}),t.jsx(v,{kind:"send",timestamp:n}),t.jsx(D,{status:a})]}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[t.jsx(W,{pool:s.pool}),t.jsx(j,{eventId:e.eventId}),t.jsx(h,{extra:e.extra})]})]})},Nt=({action:s,timestamp:n,event:e,isScam:a})=>{const{withdrawStakeRequest:i}=s;return i?t.jsx(wt,{withdrawStakeRequest:i,timestamp:n,event:e,isScam:a,status:s.status}):t.jsx(l,{event:e})},gt=({transactionHash:s,children:n})=>t.jsx(P,{url:"https://tronscan.org/#/transaction/%s",eventId:s,children:n}),It=({timestamp:s,event:n})=>{const e=R(),{data:a}=M(),{fiatAmount:i}=f(a,n.assetAmount.relativeAmount),r=n.isScam,o=n.to===e.address?"received":"send";return t.jsxs(gt,{transactionHash:n.transactionHash,children:[t.jsx(O,{isScam:r,decimals:n.assetAmount.asset.decimals,amount:n.assetAmount.weiAmount.toFixed(0),symbol:n.assetAmount.asset.symbol,total:n.assetAmount.asset.address===U.address?i:void 0,timestamp:s,kind:o,status:n.isFailed?S.Failed:S.Ok}),t.jsxs(x,{margin:!1,fullWidth:!0,children:[o==="received"&&t.jsx(q,{address:n.from}),o==="send"&&t.jsx(G,{address:n.to}),t.jsx(j,{eventId:n.transactionHash})]})]})},Ot=s=>{switch(s.action.type){case"TonTransfer":return t.jsx(ft,{...s});case"NftItemTransfer":return t.jsx(st,{...s});case"ContractDeploy":return t.jsx(tt,{...s});case"UnSubscribe":return t.jsx(K,{...s});case"Subscribe":return t.jsx(z,{...s});case"AuctionBid":return t.jsx(At,{...s});case"DomainRenew":return t.jsx(ht,{...s});case"SmartContractExec":return t.jsx(bt,{...s});case"JettonTransfer":return t.jsx(Z,{...s});case"JettonSwap":return t.jsx(X,{...s});case"JettonMint":return t.jsx(Q,{...s});case"JettonBurn":return t.jsx($,{...s});case"DepositStake":return t.jsx(kt,{...s});case"WithdrawStake":return t.jsx(Dt,{...s});case"WithdrawStakeRequest":return t.jsx(Nt,{...s});case"NftPurchase":return t.jsx(Y,{...s});case"ExtraCurrencyTransfer":return t.jsx(St,{...s});case"Unknown":return t.jsx(l,{event:s.event});default:return console.log(s),t.jsx(l,{event:s.event,children:s.action.type})}},Wt=s=>{const{t:n}=T();switch(s.event.type){case"asset-transfer":return t.jsx(It,{...s});default:return et(s.event.type),t.jsx(t.Fragment,{children:n("txActions_signRaw_types_unknownTransaction")})}},Ct=({value:s,handleClose:n})=>{const e=N.useCallback(()=>{if(s)return s.type==="tron"?t.jsx(Wt,{...s}):t.jsx(Ot,{...s})},[s,n]);return t.jsx(V,{isOpen:!!s,handleClose:n,children:e})},Et=({event:s,onClick:n,formattedDate:e})=>t.jsx(t.Fragment,{children:t.jsx(nt,{onClick:n,children:t.jsx(Ft,{event:s,formattedDate:e})})}),Ft=({event:s,formattedDate:n})=>{const e=R();return e?s.to===(e==null?void 0:e.address)?t.jsx(it,{amount:s.assetAmount.stringRelativeAmount,sender:s.from,symbol:s.assetAmount.asset.symbol,date:n,isScam:s.isScam,status:s.isFailed?S.Failed:S.Ok}):t.jsx(rt,{amount:s.assetAmount.stringRelativeAmount,symbol:s.assetAmount.asset.symbol,recipient:s.to,date:n,isScam:s.isScam,status:s.isFailed?S.Failed:S.Ok}):t.jsx(at,{})},_t=({items:s})=>{const[n,e]=N.useState(void 0),{i18n:a}=T(),i=N.useMemo(()=>ot(s),[s]);return t.jsxs(t.Fragment,{children:[i.map(([r,o])=>t.jsxs(ct,{children:[t.jsx(dt,{children:ut(a.language,r,o[0].timestamp)}),o.map(({timestamp:c,event:d,type:C,key:_})=>{const E=lt(a.language,r,c);return t.jsx(mt,{children:C==="tron"?t.jsx(Et,{event:d,formattedDate:E,onClick:()=>e({type:"tron",event:d,timestamp:d.timestamp})}):C==="ton"?t.jsx(xt,{event:d,date:E,timestamp:c,setActivity:H=>e({type:"ton",...H})}):null},_)})]},r)),t.jsx(Ct,{value:n,handleClose:()=>e(void 0)})]})};export{_t as M,Rt as u};
